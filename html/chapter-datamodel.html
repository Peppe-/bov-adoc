<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="(((Vaadin Data Model)))">
<title>Binding Components to Data</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
</head>
<body id="_datamodel" class="book toc2 toc-left">
<div id="header">
<h1>Binding Components to Data</h1>
<div class="details">
<span id="author" class="author">(((Vaadin Data Model)))</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_datamodel.overview">1. Overview</a></li>
<li><a href="#_datamodel.properties">2. Properties</a>
<ul class="sectlevel2">
<li><a href="#_datamodel.properties.viewers">2.1. Property Viewers and Editors</a></li>
<li><a href="#_datamodel.properties.objectproperty">2.2. <span class="class">ObjectProperty</span> Implementation</a></li>
<li><a href="#_datamodel.properties.converter">2.3. Converting Between Property Type and Representation</a></li>
<li><a href="#_datamodel.properties.implementing">2.4. Implementing the <span class="class">Property</span> Interface</a></li>
</ul>
</li>
<li><a href="#_datamodel.items">3. Holding properties in Items</a>
<ul class="sectlevel2">
<li><a href="#_datamodel.items.propertysetitem">3.1. The <span class="class">PropertysetItem</span> Implementation</a></li>
<li><a href="#_datamodel.items.beanitem">3.2. Wrapping a Bean in a <span class="class">BeanItem</span></a></li>
</ul>
</li>
<li><a href="#_datamodel.itembinding">4. Creating Forms by Binding Fields to Items</a>
<ul class="sectlevel2">
<li><a href="#_datamodel.itembinding.simple">4.1. Simple Binding</a></li>
<li><a href="#_datamodel.itembinding.fieldfactory">4.2. Using a <span class="interface">FieldFactory</span> to Build and Bind Fields</a></li>
<li><a href="#_datamodel.itembinding.formclass">4.3. Binding Member Fields</a></li>
<li><a href="#_datamodel.itembinding.buffering">4.4. Buffering Forms</a></li>
<li><a href="#_datamodel.itembinding.beans">4.5. Binding Fields to a Bean</a></li>
<li><a href="#_datamodel.itembinding.beanvalidation">4.6. Bean Validation</a></li>
</ul>
</li>
<li><a href="#_datamodel.container">5. Collecting Items in Containers</a>
<ul class="sectlevel2">
<li><a href="#_datamodel.container.intro">5.1. Basic Use of Containers</a></li>
<li><a href="#_datamodel.container.inner">5.2. Container Subinterfaces</a></li>
<li><a href="#_datamodel.container.indexedcontainer">5.3. <span class="class">IndexedContainer</span></a></li>
<li><a href="#_datamodel.container.beancontainer">5.4. <span class="class">BeanContainer</span></a></li>
<li><a href="#_datamodel.container.beanitemcontainer">5.5. <span class="class">BeanItemContainer</span></a></li>
<li><a href="#_iterating_over_a_container">5.6. Iterating Over a Container</a></li>
<li><a href="#_datamodel.container.gpc">5.7. <span class="class">GeneratedPropertyContainer</span></a></li>
<li><a href="#_datamodel.container.filtered">5.8. <span class="class">Filterable</span> Containers</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the Vaadin Data Model and shows how you can use it to bind components directly to data sources, such as database queries.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datamodel.overview">1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Vaadin Data Model is one of the core concepts of the library.
To allow the view (user interface components) to access the data model of an application directly, we have introduced a standard data interface.</p>
</div>
<div class="paragraph">
<p>The model allows binding user interface components directly to the data that they display and possibly allow to edit.
There are three nested levels of hierarchy in the data model: <em>property</em>, <em>item</em>, and <em>container</em>.
Using a spreadsheet application as an analogy, these would correspond to a cell, a row, and a table, respectively.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/arch/datamodel-sml.png" alt="datamodel sml">
</div>
<div class="title">Figure 1. Vaadin Data Model</div>
</div>
<div class="paragraph">
<p>The Data Model is realized as a set of interfaces in the <span class="class">com.vaadin.data</span> package.
The package contains the <span class="class">Property</span>, <span class="class">Item</span>, and <span class="class">Container</span> interfaces, along with a number of more specialized interfaces and classes.</p>
</div>
<div class="paragraph">
<p>Notice that the Data Model does not define data representation, but only interfaces.
This leaves the representation fully to the implementation of the containers.
The representation can be almost anything, such as a plain old Java object (POJO) structure, a filesystem, or a database query.</p>
</div>
<div class="paragraph">
<p>The Data Model is used heavily in the core user interface components of Vaadin, especially the field components, that is, components that implement the <span class="class">Field</span> interface or more typically extend <span class="class">AbstractField</span>, which defines many common features.
A key feature of all the built-in field components is that they can either maintain their data by themselves or be bound to an external data source.
The value of a field is always available through the <span class="class">Property</span> interface.
As more than one component can be bound to the same data source, it is easy to implement various viewer-editor patterns.</p>
</div>
<div class="paragraph">
<p>The relationships of the various interfaces are shown in <a href="#_figure.datamodel.overview.relationships">figure.datamodel.overview.relationships</a>; the value change event and listener interfaces are shown only for the <span class="class">Property</span>            interface, while the notifier interfaces are omitted altogether.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/datamodel/datamodel-interfaces-lo.png" alt="datamodel interfaces lo">
</div>
<div class="title">Figure 2. Interface Relationships in Vaadin Data Model</div>
</div>
<div class="paragraph">
<p>The Data Model has many important and useful features, such as support for change notification.
Especially containers have many helper interfaces, including ones that allow indexing, ordering, sorting, and filtering the data.
Also <span class="class">Field</span> components provide a number of features involving the data model, such as buffering, validation, and lazy loading.</p>
</div>
<div class="paragraph">
<p>Vaadin provides a number of built-in implementations of the data model interfaces.
The built-in implementations are used as the default data models in many field components.</p>
</div>
<div class="paragraph">
<p>In addition to the built-in implementations, many data model implementations, such as containers, are available as add-ons, either from the Vaadin Directory or from independent sources.
Both commercial and free implementations exist.
The JPAContainer, described in <a href="#_jpacontainer">jpacontainer</a>, is the most often used conmmercial container add-on.
The installation of add-ons is described in <a href="#_addons">addons</a>.
Notice that unlike with most regular add-on components, you do not need to compile a widget set for add-ons that include just data model implementations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datamodel.properties">2. Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <span class="interface">Property</span> interface is the base of the Vaadin Data Model.
It provides a standardized API for a single data value object that can be read (get) and written (set). A property is always typed, but can optionally support data type conversions.
The type of a property can be any Java class.
Optionally, properties can provide value change events for following their changes.</p>
</div>
<div class="paragraph">
<p>You can set the value of a property with <span class="method">setValue()</span>            and read with <span class="method">getValue()</span>.</p>
</div>
<div class="paragraph">
<p>In the following, we set and read the property value from a <span class="class">TextField</span> component, which implements the <span class="interface">Property</span> interface to allow accessing the field value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>final TextField tf = new TextField("Name");

// Set the value
tf.setValue("The text field value");

// When the field value is edited by the user
tf.addValueChangeListener(
    new Property.ValueChangeListener() {
    public void valueChange(ValueChangeEvent event) {
        // Do something with the new value
        layout.addComponent(new Label(tf.getValue()));
    }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Changes in the property value usually fire a <span class="class">ValueChangeEvent</span>, which can be handled with a <span class="class">ValueChangeListener</span>.
The event object provides reference to the property with <span class="method">getProperty()</span>.
Note that its <span class="method">getValue()</span> method returns the value with <span class="class">Object</span> type, so you need to cast it to the proper type.</p>
</div>
<div class="paragraph">
<p>Properties are in themselves unnamed.
They are collected in <em>items</em>, which associate the properties with names: the <em>Property Identifiers</em> or <em>PID_s.
Items can be further contained in containers and are identified with _Item
			Identifiers</em> or <em>IID_s.
In the spreadsheet analogy, _Property Identifiers</em> would correspond to column names and <em>Item Identifiers</em> to row names.
The identifiers can be arbitrary objects, but must implement the <span class="method">equals(Object)</span> and <span class="method">hashCode()</span> methods so that they can be used in any standard Java <span class="class">Collection</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="class">Property</span> interface can be utilized either by implementing the interface or by using some of the built-in property implementations.
Vaadin includes a <span class="class">Property</span> interface implementation for arbitrary function pairs and bean properties, with the <span class="class">MethodProperty</span> class, and for simple object properties, with the <span class="class">ObjectProperty</span> class, as described later.</p>
</div>
<div class="paragraph">
<p>In addition to the simple components, selection components provide their current selection as the property value.
In single selection mode, the property is a single item identifier, while in multiple selection mode it is a set of item identifiers.
See the documentation of the selection components for further details.</p>
</div>
<div class="paragraph">
<p>Components that can be bound to a property have an internal default data source object, typically a <span class="class">ObjectProperty</span>, which is described later.
As all such components are viewers or editors, also described later, so you can rebind a component to any data source with <span class="method">setPropertyDataSource()</span>.</p>
</div>
<div class="sect2">
<h3 id="_datamodel.properties.viewers">2.1. Property Viewers and Editors</h3>
<div class="paragraph">
<p>The most important function of the <span class="class">Property</span> as well as of the other data model interfaces is to connect classes implementing the interface directly to editor and viewer classes.
This means connecting a data source (model) to a user interface component (views) to allow editing or viewing the data model.</p>
</div>
<div class="paragraph">
<p>A property can be bound to a component implementing the <span class="class">Viewer</span> interface with <span class="method">setPropertyDataSource()</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have a data model
ObjectProperty property =
    new ObjectProperty("Hello", String.class);

// Have a component that implements Viewer
Label viewer = new Label();

// Bind it to the data
viewer.setPropertyDataSource(property);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the same method in the <span class="class">Editor</span> interface to bind a component that allows editing a particular property type to a property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have a data model
ObjectProperty property =
    new ObjectProperty("Hello", String.class);

// Have a component that implements Viewer
TextField editor = new TextField("Edit Greeting");

// Bind it to the data
editor.setPropertyDataSource(property);</code></pre>
</div>
</div>
<div class="paragraph">
<p>As all field components implement the <span class="class">Property</span>                interface, you can bind any component implementing the <span class="class">Viewer</span> interface to any field, assuming that the viewer is able the view the object type of the field.
Continuing from the above example, we can bind a <span class="class">Label</span> to the <span class="class">TextField</span> value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Label viewer = new Label();
viewer.setPropertyDataSource(editor);

// The value shown in the viewer is updated immediately
// after editing the value in the editor (once it
// loses the focus)
editor.setImmediate(true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a field has validators, as described in <a href="#_components.fields.validation">components.fields.validation</a>, the validators are executed before writing the value to the property data source, or by calling the <span class="method">validate()</span> or <span class="method">commit()</span>                for the field.</p>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.properties.objectproperty">2.2. <span class="class">ObjectProperty</span> Implementation</h3>
<div class="paragraph">
<p>The <span class="class">ObjectProperty</span> class is a simple implementation of the <span class="class">Property</span> interface that allows storing an arbitrary Java object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have a component that implements Viewer interface
final TextField tf = new TextField("Name");

// Have a data model with some data
String myObject = "Hello";

// Wrap it in an ObjectProperty
ObjectProperty property =
    new ObjectProperty(myObject, String.class);

// Bind the property to the component
tf.setPropertyDataSource(property);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.properties.converter">2.3. Converting Between Property Type and Representation</h3>
<div class="paragraph">
<p>Fields allow editing a certain type, such as a <span class="class">String</span> or <span class="class">Date</span>.
The bound property, on the other hand, could have some entirely different type.
Conversion between a representation edited by the field and the model defined in the property is handler with a converter that implements the <span class="interface">Converter</span> interface.</p>
</div>
<div class="paragraph">
<p>Most common type conversions, such as between string and integer, are handled by the default converters.
They are created in a converter factory global in the application.</p>
</div>
<div class="sect3">
<h4 id="_datamodel.properties.converter.basic">2.3.1. Basic Use of Converters</h4>
<div class="paragraph">
<p>The <span class="method">setConverter(Converter)</span>                    method sets the converter for a field.
The method is defined in <span class="class">AbstractField</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have an integer property
final ObjectProperty&lt;Integer&gt; property =
        new ObjectProperty&lt;Integer&gt;(42);

// Create a TextField, which edits Strings
final TextField tf = new TextField("Name");

// Use a converter between String and Integer
tf.setConverter(new StringToIntegerConverter());

// And bind the field
tf.setPropertyDataSource(property);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The built-in converters are the following:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Built-in Converters</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Converter</th>
<th class="tableblock halign-left valign-top">Representation</th>
<th class="tableblock halign-left valign-top">Model</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StringToIntegerConverter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StringToDoubleConverter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StringToNumberConverter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StringToBooleanConverter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StringToDateConverter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateToLongConverter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition, there is a <span class="class">ReverseConverter</span> that takes a converter as a parameter and reverses the conversion direction.</p>
</div>
<div class="paragraph">
<p>If a converter already exists for a type, the <span class="method">setConverter(Class)</span>                    retrieves the converter for the given type from the converter factory, and then sets it for the field.
This method is used implicitly when binding field to a property data source.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.properties.converter.custom">2.3.2. Implementing a Converter</h4>
<div class="paragraph">
<p>A conversion always occurs between a <em>representation
                    type</em>, edited by the field component, and a <em>model
                    type</em>, that is, the type of the property data source.
Converters implement the <span class="interface">Converter</span> interface defined in the  package.</p>
</div>
<div class="paragraph">
<p>For example, let us assume that we have a simple <span class="class">Complex</span> type for storing complex values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>public class ComplexConverter
       implements Converter&lt;String, Complex&gt; {
    @Override
    public Complex convertToModel(String value, Locale locale)
            throws ConversionException {
        String parts[] =
            value.replaceAll("[\\(\\)]", "").split(",");
        if (parts.length != 2)
            throw new ConversionException(
                    "Unable to parse String to Complex");
        return new Complex(Double.parseDouble(parts[0]),
                           Double.parseDouble(parts[1]));
    }

    @Override
    public String convertToPresentation(Complex value,
                                        Locale locale)
            throws ConversionException {
        return "("+value.getReal()+","+value.getImag()+")";
    }

    @Override
    public Class&lt;Complex&gt; getModelType() {
        return Complex.class;
    }

    @Override
    public Class&lt;String&gt; getPresentationType() {
        return String.class;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The conversion methods get the locale for the conversion as a parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.properties.converter.converterfactory">2.3.3. Converter Factory</h4>
<div class="paragraph">
<p>If a field does not directly allow editing a property type, a default converter is attempted to create using an application-global converter factory.
If you define your own converters that you wish to include in the converter factory, you need to implement one yourself.
While you could implement the <span class="interface">ConverterFactory</span>                    interface, it is usually easier to just extend <span class="class">DefaultConverterFactory</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>class MyConverterFactory extends DefaultConverterFactory {
    @Override
    public &lt;PRESENTATION, MODEL&gt; Converter&lt;PRESENTATION, MODEL&gt;
            createConverter(Class&lt;PRESENTATION&gt; presentationType,
                            Class&lt;MODEL&gt; modelType) {
        // Handle one particular type conversion
        if (String.class == presentationType &amp;&amp;
            Complex.class == modelType)
            return (Converter&lt;PRESENTATION, MODEL&gt;)
                   new ComplexConverter();

        // Default to the supertype
        return super.createConverter(presentationType,
                                     modelType);
    }
}

// Use the factory globally in the application
Application.getCurrentApplication().setConverterFactory(
        new MyConverterFactory());</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.properties.implementing">2.4. Implementing the <span class="class">Property</span> Interface</h3>
<div class="paragraph">
<p>Implementation of the <span class="class">Property</span> interface requires defining setters and getters for the value and the <em>read-only</em> mode.
Only a getter is needed for the property type, as the type is often fixed in property implementations.</p>
</div>
<div class="paragraph">
<p>The following example shows a simple implementation of the <span class="class">Property</span> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>class MyProperty implements Property {
    Integer data     = 0;
    boolean readOnly = false;

    // Return the data type of the model
    public Class&lt;?&gt; getType() {
        return Integer.class;
    }

    public Object getValue() {
        return data;
    }

    // Override the default implementation in Object
    @Override
    public String toString() {
        return Integer.toHexString(data);
    }

    public boolean isReadOnly() {
        return readOnly;
    }

    public void setReadOnly(boolean newStatus) {
        readOnly = newStatus;
    }

    public void setValue(Object newValue)
            throws ReadOnlyException, ConversionException {
        if (readOnly)
            throw new ReadOnlyException();

        // Already the same type as the internal representation
        if (newValue instanceof Integer)
            data = (Integer) newValue;

        // Conversion from a string is required
        else if (newValue instanceof String)
            try {
                data = Integer.parseInt((String) newValue, 16);
            } catch (NumberFormatException e) {
                throw new ConversionException();
            }
        else
             // Don't know how to convert any other types
            throw new ConversionException();

        // Reverse decode the hexadecimal value
    }
}

// Instantiate the property and set its data
MyProperty property = new MyProperty();
property.setValue(42);

// Bind it to a component
final TextField tf = new TextField("Name", property);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The components get the displayed value by the <span class="method">toString()</span> method, so it is necessary to override it.
To allow editing the value, value returned in the <span class="method">toString()</span> must be in a format that is accepted by the <span class="method">setValue()</span> method, unless the property is read-only.
The <span class="method">toString()</span> can perform any type conversion necessary to make the internal type a string, and the <span class="method">setValue()</span> must be able to make a reverse conversion.</p>
</div>
<div class="paragraph">
<p>The implementation example does not notify about changes in the property value or in the read-only mode.
You should normally also implement at least the <span class="class">Property.ValueChangeNotifier</span> and <span class="class">Property.ReadOnlyStatusChangeNotifier</span>.
See the <span class="class">ObjectProperty</span> class for an example of the implementation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datamodel.items">3. Holding properties in Items</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <span class="class">Item</span> interface provides access to a set of named properties.
Each property is identified by a <em>property
			identifier</em> (PID) and a reference to such a property can be queried from an <span class="class">Item</span> with <span class="method">getItemProperty()</span> using the identifier.</p>
</div>
<div class="paragraph">
<p>Examples on the use of items include rows in a <span class="class">Table</span>, with the properties corresponding to table columns, nodes in a <span class="class">Tree</span>, and the the data bound to a <span class="class">Form</span>, with item&#8217;s properties bound to individual form fields.</p>
</div>
<div class="paragraph">
<p>Items are generally equivalent to objects in the object-oriented model, but with the exception that they are configurable and provide an event handling mechanism.
The simplest way to utilize <span class="class">Item</span> interface is to use existing implementations.
Provided utility classes include a configurable property set (<span class="class">PropertysetItem</span>) and a bean-to-item adapter (<span class="class">BeanItem</span>). Also, a <span class="class">Form</span> implements the interface and can therefore be used directly as an item.</p>
</div>
<div class="paragraph">
<p>In addition to being used indirectly by many user interface components, items provide the basic data model underlying the <span class="class">Form</span>			component.
In simple cases, forms can even be generated automatically from items.
The properties of the item correspond to the fields of the form.</p>
</div>
<div class="paragraph">
<p>The <span class="class">Item</span> interface defines inner interfaces for maintaining the item property set and listening changes made to it. <span class="class">PropertySetChangeEvent</span> events can be emitted by a class implementing the <span class="class">PropertySetChangeNotifier</span>            interface.
They can be received through the <span class="class">PropertySetChangeListener</span> interface.</p>
</div>
<div class="sect2">
<h3 id="_datamodel.items.propertysetitem">3.1. The <span class="class">PropertysetItem</span> Implementation</h3>
<div class="paragraph">
<p>The <span class="class">PropertysetItem</span> is a generic implementation of the <span class="class">Item</span> interface that allows storing properties.
The properties are added with <span class="method">addItemProperty()</span>, which takes a name and the property as parameters.</p>
</div>
<div class="paragraph">
<p>The following example demonstrates a typical case of collecting <span class="class">ObjectProperty</span> properties in an item:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>PropertysetItem item = new PropertysetItem();
item.addItemProperty("name", new ObjectProperty("Zaphod"));
item.addItemProperty("age", new ObjectProperty(42));

// Bind it to a component
Form form = new Form();
form.setItemDataSource(item);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.items.beanitem">3.2. Wrapping a Bean in a <span class="class">BeanItem</span></h3>
<div class="paragraph">
<p>The <span class="class">BeanItem</span> implementation of the <span class="class">Item</span> interface is a wrapper for Java Bean objects.
In fact, only the setters and getters are required while serialization and other bean features are not, so you can wrap almost any POJOs with minimal requirements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Here is a bean (or more exactly a POJO)
class Person {
    String name;
    int    age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age.intValue();
    }
}

// Create an instance of the bean
Person bean = new Person();

// Wrap it in a BeanItem
BeanItem&lt;Person&gt; item = new BeanItem&lt;Person&gt;(bean);

// Bind it to a component
Form form = new Form();
form.setItemDataSource(item);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the <span class="method">getBean()</span> method to get a reference to the underlying bean.</p>
</div>
<div class="sect3">
<h4 id="_datamodel.items.beanitem.nested">3.2.1. Nested Beans</h4>
<div class="paragraph">
<p>You may often have composite classes where one class "has a" another class.
For example, consider the following <span class="class">Planet</span> class which "has a" discoverer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Here is a bean with two nested beans
public class Planet implements Serializable {
    String name;
    Person discoverer;

    public Planet(String name, Person discoverer) {
        this.name = name;
        this.discoverer = discoverer;
    }

    ... getters and setters ...
}

...
// Create an instance of the bean
Planet planet = new Planet("Uranus",
                    new Person("William Herschel", 1738));</code></pre>
</div>
</div>
<div class="paragraph">
<p>When shown in a <span class="class">Form</span>, for example, you would want to list the properties of the nested bean along the properties of the composite bean.
You can do that by binding the properties of the nested bean individually with a <span class="class">MethodProperty</span>                    or <span class="class">NestedMethodProperty</span>.
You should usually hide the nested bean from binding as a property by listing only the bound properties in the constructor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Wrap it in a BeanItem and hide the nested bean property
BeanItem&lt;Planet&gt; item = new BeanItem&lt;Planet&gt;(planet,
        new String[]{"name"});

// Bind the nested properties.
// Use NestedMethodProperty to bind using dot notation.
item.addItemProperty("discoverername",
    new NestedMethodProperty(planet, "discoverer.name"));

// The other way is to use regular MethodProperty.
item.addItemProperty("discovererborn",
     new MethodProperty&lt;Person&gt;(planet.getDiscoverer(),
                                "born"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The difference is that <span class="class">NestedMethodProperty</span>                    does not access the nested bean immediately but only when accessing the property values, while when using <span class="class">MethodProperty</span> the nested bean is accessed when creating the method property.
The difference is only significant if the nested bean can be null or be changed later.</p>
</div>
<div class="paragraph">
<p>You can use such a bean item for example in a <span class="class">Form</span> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Bind it to a component
Form form = new Form();
form.setItemDataSource(item);

// Nicer captions
form.getField("discoverername").setCaption("Discoverer");
form.getField("discovererborn").setCaption("Born");</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/datamodel/beanitem-nested-beans.png" alt="beanitem nested beans">
</div>
<div class="title">Figure 3. A <span class="class">Form</span> with Nested Bean Properties</div>
</div>
<div class="paragraph">
<p>The <span class="class">BeanContainer</span> and <span class="class">BeanItemContainer</span> allow easy definition of nested bean properties with <span class="method">addNestedContainerProperty()</span>, as described in <a href="#_datamodel.container.beancontainer.nestedproperties">datamodel.container.beancontainer.nestedproperties</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datamodel.itembinding">4. Creating Forms by Binding Fields to Items</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Because of pressing release schedules to get this edition to your
            hands, we were unable to completely update this chapter. Some form handling is
            still under work, especially form validation.</em></p>
</div>
<div class="paragraph">
<p>Most applications in existence have forms of some sort.
Forms contain fields, which you want to bind to a data source, an item in the Vaadin data model. <span class="class">FieldGroup</span> provides an easy way to bind fields to the properties of an item.
You can use it by first creating a layout with some fields, and then call it to bind the fields to the data source.
You can also let the <span class="class">FieldGroup</span> create the fields using a field factory.
It can also handle commits.
Notice that <span class="class">FieldGroup</span> is not a user interface component, so you can not add it to a layout.</p>
</div>
<div class="sect2">
<h3 id="_datamodel.itembinding.simple">4.1. Simple Binding</h3>
<div class="paragraph">
<p>Let us start with a data model that has an item with a couple of properties.
The item could be any item type, as described earlier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have an item
PropertysetItem item = new PropertysetItem();
item.addItemProperty("name", new ObjectProperty&lt;String&gt;("Zaphod"));
item.addItemProperty("age", new ObjectProperty&lt;Integer&gt;(42));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, you would design a form for editing the data.
The <span class="class">FormLayout</span> (<a href="#_layout.formlayout">layout.formlayout</a> is ideal for forms, but you could use any other layout as well.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have some layout and create the fields
FormLayout form = new FormLayout();

TextField nameField = new TextField("Name");
form.addComponent(nameField);

TextField ageField = new TextField("Age");
form.addComponent(ageField);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, we can bind the fields to the data as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Now create the binder and bind the fields
FieldGroup binder = new FieldGroup(item);
binder.bind(nameField, "name");
binder.bind(ageField, "age");</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above way of binding is not different from simply calling <span class="method">setPropertyDataSource()</span> for the fields.
It does, however, register the fields in the field group, which for example enables buffering or validation of the fields using the field group, as described in <a href="#_datamodel.itembinding.buffering">datamodel.itembinding.buffering</a>.</p>
</div>
<div class="paragraph">
<p>Next, we consider more practical uses for a <span class="class">FieldGroup</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.itembinding.fieldfactory">4.2. Using a <span class="interface">FieldFactory</span> to Build and Bind Fields</h3>
<div class="paragraph">
<p>Using the <span class="method">buildAndBind()</span> methods, <span class="class">FieldGroup</span> can create fields for you using a <span class="interface">FieldGroupFieldFactory</span>, but you still have to add them to the correct position in your layout.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have some layout
FormLayout form = new FormLayout();

// Now create a binder that can also create the fields
// using the default field factory
FieldGroup binder = new FieldGroup(item);
form.addComponent(binder.buildAndBind("Name", "name"));
form.addComponent(binder.buildAndBind("Age", "age"));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.itembinding.formclass">4.3. Binding Member Fields</h3>
<div class="paragraph">
<p>The <span class="method">bindMemberFields()</span> method in <span class="class">FieldGroup</span> uses reflection to bind the properties of an item to field components that are member variables of a class.
Hence, if you implement a form as a class with the fields stored as member variables, you can use this method to bind them super-easy.</p>
</div>
<div class="paragraph">
<p>The item properties are mapped to the members by the property ID and the name of the member variable.
If you want to map a property with a different ID to a member, you can use the <span class="literal">@PropertyId</span>                annotation for the member, with the property ID as the parameter.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have an item
PropertysetItem item = new PropertysetItem();
item.addItemProperty("name", new ObjectProperty&lt;String&gt;("Zaphod"));
item.addItemProperty("age", new ObjectProperty&lt;Integer&gt;(42));

// Define a form as a class that extends some layout
class MyForm extends FormLayout {
    // Member that will bind to the "name" property
    TextField name = new TextField("Name");

    // Member that will bind to the "age" property
    @PropertyId("age")
    TextField ageField = new TextField("Age");

    public MyForm() {
        // Customize the layout a bit
        setSpacing(true);

        // Add the fields
        addComponent(name);
        addComponent(ageField);
    }
}

// Create one
MyForm form = new MyForm();

// Now create a binder that can also creates the fields
// using the default field factory
FieldGroup binder = new FieldGroup(item);
binder.bindMemberFields(form);

// And the form can be used in an higher-level layout
layout.addComponent(form);</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.itembinding.formclass.customcomponent">4.3.1. Encapsulating in <span class="class">CustomComponent</span></h4>
<div class="paragraph">
<p>Using a <span class="class">CustomComponent</span> can be better for hiding the implementation details than extending a layout.
Also, the use of the <span class="class">FieldGroup</span> can be encapsulated in the form class.</p>
</div>
<div class="paragraph">
<p>Consider the following as an alternative for the form implementation presented earlier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// A form component that allows editing an item
class MyForm extends CustomComponent {
    // Member that will bind to the "name" property
    TextField name = new TextField("Name");

    // Member that will bind to the "age" property
    @PropertyId("age")
    TextField ageField = new TextField("Age");

    public MyForm(Item item) {
        FormLayout layout = new FormLayout();
        layout.addComponent(name);
        layout.addComponent(ageField);

        // Now use a binder to bind the members
        FieldGroup binder = new FieldGroup(item);
        binder.bindMemberFields(this);

        setCompositionRoot(layout);
    }
}

// And the form can be used as a component
layout.addComponent(new MyForm(item));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.itembinding.buffering">4.4. Buffering Forms</h3>
<div class="paragraph">
<p>Just like for individual fields, as described in <a href="#_components.fields.buffering">components.fields.buffering</a>, a <span class="class">FieldGroup</span> can handle buffering the form content so that it is written to the item data source only when <span class="method">commit()</span> is called for the group.
It runs validation for all fields in the group and writes their values to the item data source only if all fields pass the validation.
Edits can be discarded, so that the field values are reloaded from the data source, by calling <span class="method">discard()</span>.
Buffering is enabled by default, but can be disabled by calling <span class="method">setBuffered(false)</span> for the <span class="class">FieldGroup</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have an item of some sort
final PropertysetItem item = new PropertysetItem();
item.addItemProperty("name", new ObjectProperty&lt;String&gt;("Q"));
item.addItemProperty("age",  new ObjectProperty&lt;Integer&gt;(42));

// Have some layout and create the fields
Panel form = new Panel("Buffered Form");
form.setContent(new FormLayout());

// Build and bind the fields using the default field factory
final FieldGroup binder = new FieldGroup(item);
form.addComponent(binder.buildAndBind("Name", "name"));
form.addComponent(binder.buildAndBind("Age",  "age"));

// Enable buffering (actually enabled by default)
binder.setBuffered(true);

// A button to commit the buffer
form.addComponent(new Button("OK", new ClickListener() {
    @Override
    public void buttonClick(ClickEvent event) {
        try {
            binder.commit();
            Notification.show("Thanks!");
        } catch (CommitException e) {
            Notification.show("You fail!");
        }
    }
}));

// A button to discard the buffer
form.addComponent(new Button("Discard", new ClickListener() {
    @Override
    public void buttonClick(ClickEvent event) {
        binder.discard();
        Notification.show("Discarded!");
    }
}));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.itembinding.beans">4.5. Binding Fields to a Bean</h3>
<div class="paragraph">
<p>The <span class="class">BeanFieldGroup</span> makes it easier to bind fields to a bean.
It also handles binding to nested beans properties.
The build a field bound to a nested bean property, identify the property with dot notation.
For example, if a <span class="class">Person</span> bean has a <span class="literal">address</span> property with an <span class="class">Address</span>                type, which in turn has a <span class="literal">street</span> property, you could build a field bound to the property with <span class="method">buildAndBind("Street", "address.street")</span>.</p>
</div>
<div class="paragraph">
<p>The input to fields bound to a bean can be validated using the Java Bean Validation API, as described in <a href="#_datamodel.itembinding.beanvalidation">datamodel.itembinding.beanvalidation</a>.
The <span class="class">BeanFieldGroup</span> automatically adds a <span class="class">BeanValidator</span> to every field if a bean validation implementation is included in the classpath.</p>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.itembinding.beanvalidation">4.6. Bean Validation</h3>
<div class="paragraph">
<p>Vaadin allows using the Java Bean Validation API 1.0 (JSR-303) for validating input from fields bound to bean properties before the values are committed to the bean.
The validation is done based on annotations on the bean properties, which are used for creating the actual validators automatically.
See <a href="#_components.fields.validation">components.fields.validation</a> for general information about validation.</p>
</div>
<div class="paragraph">
<p>Using bean validation requires an implementation of the Bean Validation API, such as Hibernate Validator (<em class="path">hibernate-validator-4.2.0.Final.jar</em> or later) or Apache Bean Validation.
The implementation JAR must be included in the project classpath when using the bean validation, or otherwise an internal error is thrown.</p>
</div>
<div class="paragraph">
<p>Bean validation is especially useful when persisting entity beans with the Vaadin JPAContainer, described in <a href="#_jpacontainer">jpacontainer</a>.</p>
</div>
<div class="sect3">
<h4 id="_datamodel.itembinding.beanvalidation.annotations">4.6.1. Annotations</h4>
<div class="paragraph">
<p>The validation constraints are defined as annotations.
For example, consider the following bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Here is a bean
public class Person implements Serializable {
    @NotNull
    @javax.validation.constraints.Size(min=2, max=10)
    String name;

    @Min(1)
    @Max(130)
    int age;

    // ... setters and getters ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a complete list of allowed constraints for different data types, please see the &lt;&lt;,Bean
                    Validation API documentation&gt;&gt;.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.itembinding.beanvalidation.validating">4.6.2. Validating the Beans</h4>
<div class="paragraph">
<p>Validating a bean is done with a <span class="class">BeanValidator</span>, which you initialize with the name of the bean property it should validate and add it the the editor field.</p>
</div>
<div class="paragraph">
<p>In the following example, we validate a single unbuffered field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Person bean = new Person("Mung bean", 100);
BeanItem&lt;Person&gt; item = new BeanItem&lt;Person&gt; (bean);

// Create an editor bound to a bean field
TextField firstName = new TextField("First Name",
        item.getItemProperty("name"));

// Add the bean validator
firstName.addValidator(new BeanValidator(Person.class, "name"));

firstName.setImmediate(true);
layout.addComponent(firstName);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the validation is done immediately after focus leaves the field.
You could do the same for the other field as well.</p>
</div>
<div class="paragraph">
<p>Bean validators are automatically created when using a <span class="class">BeanFieldGroup</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Have a bean
Person bean = new Person("Mung bean", 100);

// Form for editing the bean
final BeanFieldGroup&lt;Person&gt; binder =
        new BeanFieldGroup&lt;Person&gt;(Person.class);
binder.setItemDataSource(bean);
layout.addComponent(binder.buildAndBind("Name", "name"));
layout.addComponent(binder.buildAndBind("Age", "age"));

// Buffer the form content
binder.setBuffered(true);
layout.addComponent(new Button("OK", new ClickListener() {
    @Override
    public void buttonClick(ClickEvent event) {
        try {
            binder.commit();
        } catch (CommitException e) {
        }
    }
}));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.itembinding.beanvalidation.locale">4.6.3. Locale Setting for Bean Validation</h4>
<div class="paragraph">
<p>The validation error messages are defined in the bean validation implementation, in a <em class="path">ValidationMessages.properties</em> file.
The message is shown in the language specified with the locale setting for the form.
The default language is English, but for example Hibernate Validator contains translations of the messages for a number of languages.
If other languages are needed, you need to provide a translation of the properties file.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datamodel.container">5. Collecting Items in Containers</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>The <span class="class">Container</span> interface is the highest containment level of the Vaadin data model, for containing items (rows) which in turn contain properties (columns). Containers can therefore represent tabular data, which can be viewed in a <span class="class">Table</span> or some other selection component, as well as hierarchical data.</p>
</div>
<div class="paragraph">
<p>The items contained in a container are identified by an <em>item
            identifier</em> or <em>IID</em>, and the properties by a <em>property identifier</em> or <em>PID</em>.</p>
</div>
<div class="sect2">
<h3 id="_datamodel.container.intro">5.1. Basic Use of Containers</h3>
<div class="paragraph">
<p>The basic use of containers involves creating one, adding items to it, and binding it as a container data source of a component.</p>
</div>
<div class="sect3">
<h4 id="_datamodel.container.intro.default">5.1.1. Default Containers and Delegation</h4>
<div class="paragraph">
<p>Before saying anything about creation of containers, it should be noted that all components that can be bound to a container data source are by default bound to a default container.
For example, <span class="class">Table</span> is bound to a <span class="class">IndexedContainer</span>, <span class="class">Tree</span>                    to a <span class="class">HierarchicalContainer</span>, and so forth.</p>
</div>
<div class="paragraph">
<p>All of the user interface components using containers also implement the relevant container interfaces themselves, so that the access to the underlying data source is delegated through the component.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Create a table with one column
Table table = new Table("My Table");
table.addContainerProperty("col1", String.class, null);

// Access items and properties through the component
table.addItem("row1"); // Create item by explicit ID
Item item1 = table.getItem("row1");
Property property1 = item1.getItemProperty("col1");
property1.setValue("some given value");

// Equivalent access through the container
Container container = table.getContainerDataSource();
container.addItem("row2");
Item item2 = container.getItem("row2");
Property property2 = item2.getItemProperty("col1");
property2.setValue("another given value");</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.intro.creating">5.1.2. Creating and Binding a Container</h4>
<div class="paragraph">
<p>A container is created and bound to a component as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Create a container of some type
Container container = new IndexedContainer();

// Initialize the container as required by the container type
container.addContainerProperty("name", String.class, "none");
container.addContainerProperty("volume", Double.class, 0.0);

... add items ...

// Bind it to a component
Table table = new Table("My Table");
table.setContainerDataSource(container);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Most components that can be bound to a container allow passing it also in the constructor, in addition to using <span class="method">setContainerDataSource()</span>.
Creation of the container depends on its type.
For some containers, such as the <span class="class">IndexedContainer</span>, you need to define the contained properties (columns) as was done above, while some others determine them otherwise.
The definition of a property with <span class="method">addContainerProperty()</span> requires a unique property ID, type, and a default value.
You can also give .</p>
</div>
<div class="paragraph">
<p>Vaadin has a several built-in in-memory container implementations, such as <span class="class">IndexedContainer</span> and <span class="class">BeanItemContainer</span>, which are easy to use for setting up nonpersistent data storages.
For persistent data, either the built-in <span class="class">SQLContainer</span> or the <span class="class">JPAContainer</span> add-on container can be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.intro.adding">5.1.3. Adding Items and Accessing Properties</h4>
<div class="paragraph">
<p>Items can be added to a container with the <span class="method">addItem()</span> method.
The parameterless version of the method automatically generates the item ID.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Create an item
Object itemId = container.addItem();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Properties can be requested from container by first requesting an item with <span class="method">getItem()</span> and then getting the properties from the item with <span class="method">getItemProperty()</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Get the item object
Item item = container.getItem(itemId);

// Access a property in the item
Property&lt;String&gt; nameProperty =
        item.getItemProperty("name");

// Do something with the property
nameProperty.setValue("box");</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also get a property directly by the item and property ids with <span class="method">getContainerProperty()</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>container.getContainerProperty(itemId, "volume").setValue(5.0);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.intro.givenid">5.1.4. Adding Items by Given ID</h4>
<div class="paragraph">
<p>Some containers, such as <span class="class">IndexedContainer</span> and <span class="class">HierarchicalContainer</span>, allow adding items by a given ID, which can be any <span class="class">Object</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Item item = container.addItem("agivenid");
item.getItemProperty("name").setValue("barrel");
Item.getItemProperty("volume").setValue(119.2);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the actual item <em>is not</em> given as a parameter to the method, only its ID, as the interface assumes that the container itself creates all the items it contains.
Some container implementations can provide methods to add externally created items, and they can even assume that the item ID object is also the item itself.
Lazy containers might not create the item immediately, but lazily when it is accessed by its ID.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.container.inner">5.2. Container Subinterfaces</h3>
<div class="paragraph">
<p>The <span class="class">Container</span> interface contains inner interfaces that container implementations can implement to fulfill different features required by components that present container data.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><span class="interface">Container.Filterable</span></dt>
<dd>
<p>Filterable containers allow filtering the contained items by filters, as described in <a href="#_datamodel.container.filtered">datamodel.container.filtered</a>.</p>
</dd>
<dt class="hdlist1"><span class="interface">Container.Hierarchical</span></dt>
<dd>
<p>Hierarchical containers allow representing hierarchical relationships between items and are required by the <span class="class">Tree</span> and <span class="class">TreeTable</span> components.
The <span class="class">HierarchicalContainer</span> is a built-in in-memory container for hierarchical data, and is used as the default container for the tree components.
The <span class="class">FilesystemContainer</span> provides access to browsing the content of a file system.
Also <span class="class">JPAContainer</span> is hierarchical, as described in <a href="#_jpacontainer.usage.hierarchical">jpacontainer.usage.hierarchical</a>.</p>
</dd>
<dt class="hdlist1"><span class="interface">Container.Indexed</span></dt>
<dd>
<p>An indexed container allows accessing items by an index number, not just their item ID.
This feature is required by some components, especially <span class="class">Table</span>, which needs to provide lazy access to large containers.
The <span class="class">IndexedContainer</span> is a basic in-memory implementation, as described in <a href="#_datamodel.container.indexedcontainer">datamodel.container.indexedcontainer</a>.</p>
</dd>
<dt class="hdlist1"><span class="interface">Container.Ordered</span></dt>
<dd>
<p>An ordered container allows traversing the items in successive order in either direction.
Most built-in containers are ordered.</p>
</dd>
<dt class="hdlist1"><span class="interface">Container.SimpleFilterable</span></dt>
<dd>
<p>This interface enables filtering a container by string matching with <span class="method">addContainerFilter()</span>.
The filtering is done by either searching the given string anywhere in a property value, or as its prefix.</p>
</dd>
<dt class="hdlist1"><span class="interface">Container.Sortable</span></dt>
<dd>
<p>A sortable container is required by some components that allow sorting the content, such as <span class="class">Table</span>, where the user can click a column header to sort the table by the column.
Some other components, such as <span class="class">Calendar</span>, may require that the content is sorted to be able to display it properly.
Depending on the implementation, sorting can be done only when the <span class="method">sort()</span> method is called, or the container is automatically kept in order according to the last call of the method.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>See the API documentation for a detailed description of the interfaces.</p>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.container.indexedcontainer">5.3. <span class="class">IndexedContainer</span></h3>
<div class="paragraph">
<p>The <span class="class">IndexedContainer</span> is an in-memory container that implements the <span class="interface">Indexed</span> interface to allow referencing the items by an index. <span class="class">IndexedContainer</span> is used as the default container in most selection components in Vaadin.</p>
</div>
<div class="paragraph">
<p>The properties need to be defined with <span class="method">addContainerProperty()</span>, which takes the property ID, type, and a default value.
This must be done before any items are added to the container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Create the container
IndexedContainer container = new IndexedContainer();

// Define the properties (columns)
container.addContainerProperty("name", String.class, "noname");
container.addContainerProperty("volume", Double.class, -1.0d);

// Add some items
Object content[][] = {{"jar", 2.0}, {"bottle", 0.75},
                      {"can", 1.5}};
for (Object[] row: content) {
    Item newItem = container.getItem(container.addItem());
    newItem.getItemProperty("name").setValue(row[0]);
    newItem.getItemProperty("volume").setValue(row[1]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>New items are added with <span class="method">addItem()</span>, which returns the item ID of the new item, or by giving the item ID as a parameter as was described earlier.
Note that the <span class="class">Table</span>                component, which has <span class="class">IndexedContainer</span> as its default container, has a conveniency <span class="method">addItem()</span>                method that allows adding items as object vectors containing the property values.</p>
</div>
<div class="paragraph">
<p>The container implements the <span class="interface">Container.Indexed</span> feature to allow accessing the item IDs by their index number, with <span class="method">getIdByIndex()</span>, etc.
The feature is required mainly for internal purposes of some components, such as <span class="class">Table</span>, which uses it to enable lazy transmission of table data to the client-side.</p>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.container.beancontainer">5.4. <span class="class">BeanContainer</span></h3>
<div class="paragraph">
<p>The <span class="class">BeanContainer</span> is an in-memory container for JavaBean objects.
Each contained bean is wrapped inside a <span class="class">BeanItem</span> wrapper.
The item properties are determined automatically by inspecting the getter and setter methods of the class.
This requires that the bean class has public visibility, local classes for example are not allowed.
Only beans of the same type can be added to the container.</p>
</div>
<div class="paragraph">
<p>The generic has two parameters: a bean type and an item identifier type.
The item identifiers can be obtained by defining a custom resolver, using a specific item property for the IDs, or by giving item IDs explicitly.
As such, it is more general than the <span class="class">BeanItemContainer</span>, which uses the bean object itself as the item identifier, making the use usually simpler.
Managing the item IDs makes <span class="class">BeanContainer</span> more complex to use, but it is necessary in some cases where the <span class="method">equals()</span> or <span class="method">hashCode()</span> methods have been reimplemented in the bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Here is a JavaBean
public class Bean implements Serializable {
    String name;
    double energy; // Energy content in kJ/100g

    public Bean(String name, double energy) {
        this.name   = name;
        this.energy = energy;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public double getEnergy() {
        return energy;
    }

    public void setEnergy(double energy) {
        this.energy = energy;
    }
}

void basic(VerticalLayout layout) {
    // Create a container for such beans with
    // strings as item IDs.
    BeanContainer&lt;String, Bean&gt; beans =
        new BeanContainer&lt;String, Bean&gt;(Bean.class);

    // Use the name property as the item ID of the bean
    beans.setBeanIdProperty("name");

    // Add some beans to it
    beans.addBean(new Bean("Mung bean",   1452.0));
    beans.addBean(new Bean("Chickpea",    686.0));
    beans.addBean(new Bean("Lentil",      1477.0));
    beans.addBean(new Bean("Common bean", 129.0));
    beans.addBean(new Bean("Soybean",     1866.0));

    // Bind a table to it
    Table table = new Table("Beans of All Sorts", beans);
    layout.addComponent(table);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use explicit item IDs, use the methods <span class="method">addItem(Object,
                Object)</span>, <span class="method">addItemAfter(Object, Object,
                Object)</span>, and <span class="method">addItemAt(int, Object,
                Object)</span>.</p>
</div>
<div class="paragraph">
<p>It is not possible to add additional properties to the container, except properties in a nested bean.</p>
</div>
<div class="sect3">
<h4 id="_datamodel.container.beancontainer.nestedproperties">5.4.1. Nested Properties</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>If you have a nested bean with an 1:1 relationship inside a bean type contained in a <span class="class">BeanContainer</span> or <span class="class">BeanItemContainer</span>, you can add its properties to the container by specifying them with <span class="method">addNestedContainerProperty()</span>.
The feature is defined at the level of <span class="class">AbstractBeanContainer</span>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>As with the bean in a bean container, also a nested bean must have public visibility or otherwise an access exception is thrown.
An intermediate reference from a bean in the bean container to a nested bean may have a null value.</p>
</div>
<div class="paragraph">
<p>For example, let us assume that we have the following two beans with the first one nested inside the second one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/** Bean to be nested */
public class EqCoord implements Serializable {
    double rightAscension; /* In angle hours */
    double declination;    /* In degrees     */

    ... setters and getters for the properties ...
}

/** Bean referencing a nested bean */
public class Star implements Serializable {
    String  name;
    EqCoord equatorial; /* Nested bean */

    ... setters and getters for the properties ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After creating the container, you can declare the nested properties by specifying their property identifiers with the <span class="method">addNestedContainerProperty()</span> in dot notation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Create a container for beans
BeanItemContainer&lt;Star&gt; stars =
    new BeanItemContainer&lt;Star&gt;(Star.class);

// Declare the nested properties to be used in the container
stars.addNestedContainerProperty("equatorial.rightAscension");
stars.addNestedContainerProperty("equatorial.declination");

// Add some items
stars.addBean(new Star("Sirius",  new EqCoord(6.75, 16.71611)));
stars.addBean(new Star("Polaris", new EqCoord(2.52, 89.26417)));

// Here the nested bean reference is null
stars.addBean(new Star("Vega", null));</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you bind such a container to a <span class="class">Table</span>, you probably also need to set the column headers.
Notice that the entire nested bean itself is still a property in the container and would be displayed in its own column.
The <span class="method">toString()</span>                    method is used for obtaining the displayed value, which is by default an object reference.
You normally do not want this, so you can hide the column with <span class="method">setVisibleColumns()</span>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Put them in a table
Table table = new Table("Stars", stars);
table.setColumnHeader("equatorial.rightAscension", "RA");
table.setColumnHeader("equatorial.declination",    "Decl");
table.setPageLength(table.size());

// Have to set explicitly to hide the "equatorial" property
table.setVisibleColumns("name",
    "equatorial.rightAscension", "equatorial.declination");</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting table is shown in <a href="#_figure.datamodel.container.beancontainer.nestedproperties">figure.datamodel.container.beancontainer.nestedproperties</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/datamodel/beanitemcontainer-nested-beans.png" alt="beanitemcontainer nested beans">
</div>
<div class="title">Figure 4. <span class="class">Table</span> Bound to a <span class="class">BeanContainer</span> with Nested Properties</div>
</div>
<div class="paragraph">
<p>The bean binding in <span class="class">AbstractBeanContainer</span>                    normally uses the <span class="class">MethodProperty</span> implementation of the <span class="class">Property</span> interface to access the bean properties using the setter and getter methods.
For nested properties, the <span class="class">NestedMethodProperty</span> implementation is used.</p>
</div>
<div class="paragraph">
<p>

</p>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.beancontainer.idresolver">5.4.2. Defining a Bean ID Resolver</h4>
<div class="paragraph">
<p>If a bean ID resolver is set using <span class="method">setBeanIdResolver()</span> or <span class="method">setBeanIdProperty()</span>, the methods <span class="method">addBean()</span>, <span class="method">addBeanAfter()</span>, <span class="method">addBeanAt()</span> and <span class="method">addAll()</span> can be used to add items to the container.
If one of these methods is called, the resolver is used to generate an identifier for the item (must not return ).</p>
</div>
<div class="paragraph">
<p>Note that explicit item identifiers can also be used when a resolver has been set by calling the <span class="method">addItem*()</span> methods - the resolver is only used when adding beans using the <span class="method">addBean*()</span> or <span class="method">addAll(Collection)</span> methods.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.container.beanitemcontainer">5.5. <span class="class">BeanItemContainer</span></h3>
<div class="paragraph">
<p><span class="class">BeanItemContainer</span> is a container for JavaBean objects where each bean is wrapped inside a <span class="class">BeanItem</span> wrapper.
The item properties are determined automatically by inspecting the getter and setter methods of the class.
This requires that the bean class has public visibility, local classes for example are not allowed.
Only beans of the same type can be added to the container.</p>
</div>
<div class="paragraph">
<p><span class="class">BeanItemContainer</span> is a specialized version of the <span class="class">BeanContainer</span> described in <a href="#_datamodel.container.beancontainer">datamodel.container.beancontainer</a>.
It uses the bean itself as the item identifier, which makes it a bit easier to use than <span class="class">BeanContainer</span> in many cases.
The latter is, however, needed if the bean has reimplemented the <span class="method">equals()</span> or <span class="method">hashCode()</span>                methods.</p>
</div>
<div class="paragraph">
<p>Let us revisit the example given in <a href="#_datamodel.container.beancontainer">datamodel.container.beancontainer</a> using the <span class="class">BeanItemContainer</span>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Create a container for the beans
BeanItemContainer&lt;Bean&gt; beans =
    new BeanItemContainer&lt;Bean&gt;(Bean.class);

// Add some beans to it
beans.addBean(new Bean("Mung bean",   1452.0));
beans.addBean(new Bean("Chickpea",    686.0));
beans.addBean(new Bean("Lentil",      1477.0));
beans.addBean(new Bean("Common bean", 129.0));
beans.addBean(new Bean("Soybean",     1866.0));

// Bind a table to it
Table table = new Table("Beans of All Sorts", beans);</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is not possible to add additional properties to a <span class="class">BeanItemContainer</span>, except properties in a nested bean, as described in <a href="#_datamodel.container.beancontainer">datamodel.container.beancontainer</a>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
</div>
<div class="sect2">
<h3 id="_iterating_over_a_container">5.6. Iterating Over a Container</h3>
<div class="paragraph">
<p>As the items in a <span class="class">Container</span> are not necessarily indexed, iterating over the items has to be done using an <span class="class">Iterator</span>.
The <span class="method">getItemIds()</span>                method of <span class="class">Container</span> returns a <span class="class">Collection</span> of item identifiers over which you can iterate.
The following example demonstrates a typical case where you iterate over the values of check boxes in a column of a <span class="class">Table</span> component.
The context of the example is the example used in <a href="#_components.table">components.table</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>// Collect the results of the iteration into this string.
String items = "";

// Iterate over the item identifiers of the table.
for (Iterator i = table.getItemIds().iterator(); i.hasNext();) {
    // Get the current item identifier, which is an integer.
    int iid = (Integer) i.next();

    // Now get the actual item from the table.
    Item item = table.getItem(iid);

    // And now we can get to the actual checkbox object.
    Button button = (Button)
            (item.getItemProperty("ismember").getValue());

    // If the checkbox is selected.
    if ((Boolean)button.getValue() == true) {
        // Do something with the selected item; collect the
        // first names in a string.
        items += item.getItemProperty("First Name")
                     .getValue() + " ";
    }
}

// Do something with the results; display the selected items.
layout.addComponent (new Label("Selected items: " + items));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the <span class="method">getItemIds()</span> returns an <em>unmodifiable collection</em>, so the <span class="class">Container</span> may not be modified during iteration.
You can not, for example, remove items from the <span class="class">Container</span> during iteration.
The modification includes modification in another thread.
If the <span class="class">Container</span> is modified during iteration, a <span class="class">ConcurrentModificationException</span> is thrown and the iterator may be left in an undefined state.</p>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.container.gpc">5.7. <span class="class">GeneratedPropertyContainer</span></h3>
<div class="paragraph">
<p><span class="class">GeneratedPropertyContainer</span> is a container wrapper that allows defining generated values for properties (columns). The generated properties can shadow properties with the same IDs in the wrapped container.
Removing a property from the wrapper hides it.</p>
</div>
<div class="paragraph">
<p>The container is especially useful with <span class="class">Grid</span>, which does not support generated columns or hiding columns like <span class="class">Table</span> does.</p>
</div>
<div class="sect3">
<h4 id="_datamodel.container.gpc.wrapping">5.7.1. Wrapping a Container</h4>
<div class="paragraph">
<p>A container to be wrapped must be a <span class="interface">Container.Indexed</span>.
It can optionally also implement <span class="interface">Container.Sortable</span> or <span class="interface">Container.Filterable</span> to enable sorting and filtering the container, respectively.</p>
</div>
<div class="paragraph">
<p>For example, let us consider the following container with some regular columns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>IndexedContainer container = new IndexedContainer();
container.addContainerProperty("firstname", String.class, null);
container.addContainerProperty("lastname", String.class, null);
container.addContainerProperty("born", Integer.class, null);
container.addContainerProperty("died", Integer.class, null);

// Wrap it
GeneratedPropertyContainer gpcontainer =
    new GeneratedPropertyContainer(container);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.gpc.properties">5.7.2. <span class="class">GeneratedPropertyContainer</span></h4>
<div class="paragraph">
<p>Now, you can add generated properties in the container with <span class="method">addGeneratedProperty()</span> by specifying a property ID and a <span class="interface">PropertyValueGenerator</span>.
The method takes the ID of the generated property as first parameter; you can use a same ID as in the wrapped container to shadow its properties.</p>
</div>
<div class="paragraph">
<p>You need to implement <span class="method">getType()</span>, which must return the class object of the value type of the property, and <span class="method">getValue()</span>, which returns the property value for the given item.
The item ID and the property ID of the generated property are also given in case they are needed.
You can access other properties of the item to compute the property value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>gpcontainer.addGeneratedProperty("lived",
    new PropertyValueGenerator&lt;Integer&gt;() {
    @Override
    public Integer getValue(Item item, Object itemId,
                            Object propertyId) {
        int born = (Integer)
                   item.getItemProperty("born").getValue();
        int died = (Integer)
                   item.getItemProperty("died").getValue();
        return Integer.valueOf(died - born);
    }

    @Override
    public Class&lt;Integer&gt; getType() {
        return Integer.class;
    }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can access other items in the container, also their generated properties, although you should beware of accidental recursion.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.gpc.using">5.7.3. Using <span class="class">GeneratedPropertyContainer</span></h4>
<div class="paragraph">
<p>Finally, you need to bind the <span class="class">GeneratedPropertyContainer</span> to the component instead of the wrapped container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Grid grid = new Grid(gpcontainer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using <span class="class">GeneratedPropertyContainer</span> in <span class="class">Grid</span>, notice that generated columns are read-only, so you can not add grid rows with <span class="method">addRow()</span>.
In editable mode, editor fields are not generated for generated columns.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.gpc.sorting">5.7.4. Sorting</h4>
<div class="paragraph">
<p>Even though the <span class="class">GeneratedPropertyContainer</span>                    implements <span class="interface">Container.Sortable</span>, the wrapped container must also support it or otherwise sorting is disabled.
Also, the generated properties are not normally sortable, but require special handling to enable sorting.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datamodel.container.filtered">5.8. <span class="class">Filterable</span> Containers</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Containers that implement the <span class="class">Container.Filterable</span>                interface can be filtered.
For example, the built-in <span class="class">IndexedContainer</span> and the bean item containers implement it.
Filtering is typically used for filtering the content of a <span class="class">Table</span>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Filters implement the <span class="class">Filter</span> interface and you add them to a filterable container with the <span class="method">addContainerFilter()</span> method.
Container items that pass the filter condition are kept and shown in the filterable component.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Filter filter = new SimpleStringFilter("name",
        "Douglas", true, false);
table.addContainerFilter(filter);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If multiple filters are added to a container, they are evaluated using the logical AND operator so that only items that are passed by all the filters are kept.</p>
</div>
<div class="sect3">
<h4 id="_datamodel.container.filtered.composite">5.8.1. Atomic and Composite Filters</h4>
<div class="paragraph">
<p>Filters can be classified as <em>atomic</em> and <em>composite</em>.
Atomic filters, such as <span class="class">SimpleStringFilter</span>, define a single condition, usually for a specific container property.
Composite filters make filtering decisions based on the result of one or more other filters.
The built-in composite filters implement the logical operators AND, OR, or NOT.</p>
</div>
<div class="paragraph">
<p>For example, the following composite filter would filter out items where the <span class="literal">name</span> property contains the name "Douglas" somewhere <em>or</em> where the <span class="literal">age</span> property has value less than 42.
The properties must have <span class="class">String</span>                    and <span class="class">Integer</span> types, respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>filter = new Or(new SimpleStringFilter("name",
        "Douglas", true, false),
        new Compare.Less("age", 42));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.filtered.builtin">5.8.2. Built-In Filter Types</h4>
<div class="paragraph">
<p>The built-in filter types are the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><span class="class">SimpleStringFilter</span></dt>
<dd>
<p>Passes items where the specified property, that must be of <span class="class">String</span> type, contains the given  as a substring.
If  is , the search is case insensitive.
If the  is , the substring may only be in the beginning of the string, otherwise it may be elsewhere as well.</p>
</dd>
<dt class="hdlist1"><span class="class">IsNull</span></dt>
<dd>
<p>Passes items where the specified property has null value.
For in-memory filtering, a simple <span class="literal">==</span> check is performed.
For other containers, the comparison implementation is container dependent, but should correspond to the in-memory null check.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><span class="class">Equal</span>,
                            <span class="class">Greater</span>,
                            <span class="class">Less</span>,
                            <span class="class">GreaterOrEqual</span>, and
                            <span class="class">LessOrEqual</span>::
  The comparison filter implementations compare the specified property value to the given constant and pass items for which the comparison result is true.
  The comparison operators are included in the abstract <span class="class">Compare</span> class.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><span class="class">And</span> and <span class="class">Or</span></dt>
<dd>
<p>These logical operator filters are composite filters that combine multiple other filters.</p>
</dd>
<dt class="hdlist1"><span class="class">Not</span></dt>
<dd>
<p>The logical unary operator filter negates which items are passed by the filter given as the parameter.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_datamodel.container.filtered.custom">5.8.3. Implementing Custom Filters</h4>
<div class="paragraph">
<p>A custom filter needs to implement the <span class="class">Container.Filter</span> interface.</p>
</div>
<div class="paragraph">
<p>A filter can use a single or multiple properties for the filtering logic.
The properties used by the filter must be returned with the <span class="method">appliesToProperty()</span> method.
If the filter applies to a user-defined property or properties, it is customary to give the properties as the first argument for the constructor of the filter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>class MyCustomFilter implements Container.Filter {
    protected String propertyId;
    protected String regex;

    public MyCustomFilter(String propertyId, String regex) {
        this.propertyId = propertyId;
        this.regex      = regex;
    }

    /** Tells if this filter works on the given property. */
    @Override
    public boolean appliesToProperty(Object propertyId) {
        return propertyId != null &amp;&amp;
               propertyId.equals(this.propertyId);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The actual filtering logic is done in the <span class="method">passesFilter()</span> method, which simply returns <span class="literal">true</span> if the item should pass the filter and <span class="literal">false</span> if it should be filtered out.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    /** Apply the filter on an item to check if it passes. */
    @Override
    public boolean passesFilter(Object itemId, Item item)
            throws UnsupportedOperationException {
        // Acquire the relevant property from the item object
        Property p = item.getItemProperty(propertyId);

        // Should always check validity
        if (p == null || !p.getType().equals(String.class))
            return false;
        String value = (String) p.getValue();

        // The actual filter logic
        return value.matches(regex);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use such a custom filter just like any other:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>c.addContainerFilter(
    new MyCustomFilter("Name", (String) tf.getValue()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>


</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-03-12 09:16:15 EET
</div>
</div>
</body>
</html>