# SOME DESCRIPTIVE TITLE.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: http://bugs.kde.org\n"
"POT-Creation-Date: 2013-11-13 16:06+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <kde-i18n-doc@kde.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. Tag: title
#: chapter-testbench.xml:11
#, no-c-format
msgid "Vaadin TestBench"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:13
#, no-c-format
msgid "This chapter describes the installation and use of the Vaadin TestBench."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:18
#, no-c-format
msgid "Overview"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:20
#, no-c-format
msgid "Quality assurance is one of the cornerstones of modern software development. Extending throughout the entire development process, quality assurance is the thread that binds the end product to the requirements. In iterative development processes, with ever shorter release cycles and continuous integration, the role of regression testing is central. The special nature of web applications creates many unique requirements for regression testing."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:30
#, no-c-format
msgid "In a typical situation, you are developing a web application with Vaadin and want to ensure that only intended changes occur in its behaviour after modifying the code, without testing the application manually every time. There are two basic ways of detecting such regressions. Screenshots are the strictest way, but often just checking the displayed values in the HTML is better if you want to allow some flexibility for themeing, for example. You may also want to generate many different kinds of inputs to the application and check that they produce the desired outputs."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:42
#, no-c-format
msgid "Controlling the Browser with WebDriver"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:53
#, no-c-format
msgid "Vaadin TestBench utilizes the Selenium WebDriver to control the browser from Java code, as illustrated in <xref linkend=\"figure.testbench.webdriver\"/>. It can open a new browser window to start the application, interact with the components for example by clicking them, and then get the HTML element values."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:60
#, no-c-format
msgid "You can develop such WebDriver unit tests along your application code, for example with JUnit, which is a widely used Java unit testing framework. You can also use a recorder that runs in the browser to create JUnit test case stubs, which you can then refine further with Java. You can run the tests as many times as you want in your workstation or in a distributed grid setup."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:69
#, no-c-format
msgid "TestBench Workflow"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:80
#, no-c-format
msgid "The main features of Vaadin TestBench are:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:84
#, no-c-format
msgid "Record JUnit test case stubs in browser"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:87
#, no-c-format
msgid "Develop tests in Java with the WebDriver"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:90
#, no-c-format
msgid "Validate UI state by assertions and screen capture comparison"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:93
#, no-c-format
msgid "Screen capture comparison with difference highlighting"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:96
#, no-c-format
msgid "Distributed test grid for running tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:99
#, no-c-format
msgid "Integration with unit testing"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:102
#, no-c-format
msgid "Test with browsers on mobile devices"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:106
#, no-c-format
msgid "Execution of tests can be distributed over a grid of test nodes, which speeds up testing. The grid nodes can run different operating systems and have different browsers installed. In a minimal setup, such as for developing the tests, you can use Vaadin TestBench on just a single computer."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:114
#, no-c-format
msgid "Based on Selenium"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:116
#, no-c-format
msgid "Vaadin TestBench is based on the Selenium web browser automation library. With the Selenium WebDriver API, you can control browsers straight from Java code. The TestBench Recorder is based on the Selenium IDE."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:123
#, no-c-format
msgid "Selenium is augmented with Vaadin-specific extensions, such as:"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:128
#, no-c-format
msgid "Proper handling of Ajax-based communications of Vaadin"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:129
#, no-c-format
msgid "Exporting test case stubs from the Recorder"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:130
#, no-c-format
msgid "Performance testing of Vaadin applications"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:131
#, no-c-format
msgid "Screen capture comparison"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:132
#, no-c-format
msgid "Finding HTML elements using a Vaadin selector"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:137
#, no-c-format
msgid "TestBench Components"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:139
#, no-c-format
msgid "The main components of Vaadin TestBench are:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:145
#, no-c-format
msgid "Vaadin TestBench Java Library"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:148
#, no-c-format
msgid "Vaadin TestBench Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:152
#, no-c-format
msgid "The library includes WebDriver, which provides API to control a browser like a user would. This API can be used to build tests, for example, with JUnit. It also includes the grid hub and node servers, which you can use to run tests in a grid configuration."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:159
#, no-c-format
msgid "The Vaadin TestBench Recorder is helpful for creating test case stubs. It is a Firefox extension that you install in your browser. It has a control panel to record test cases and play them back. You can play the test cases right in the recorder. You can then export the tests as JUnit tests, which you can edit further and then execute with the WebDriver."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:167
#, no-c-format
msgid "Vaadin TestBench Library provides the central control logic for:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:173
#, no-c-format
msgid "Executing tests with the WebDriver"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:178
#, no-c-format
msgid "Additional support for testing Vaadin-based applications"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:183
#, no-c-format
msgid "Comparing screen captures with reference images"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:188
#, no-c-format
msgid "Distributed testing with grid node and hub services"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:196
#, no-c-format
msgid "Requirements"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:198
#, no-c-format
msgid "Requirements for recording test cases with Vaadin TestBench Recorder:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:204
#, no-c-format
msgid "Mozilla Firefox"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:208
#, no-c-format
msgid "Requirements for running tests:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:214
#, no-c-format
msgid "Java JDK 1.6 or newer"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:217
#, no-c-format
msgid "Browsers installed on test nodes as supported by Selenium WebDriver"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:219
#, no-c-format
msgid "<listitem>Google Chrome</listitem>"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:220
#, no-c-format
msgid "<listitem>Internet Explorer</listitem>"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:221
#, no-c-format
msgid "Mozilla Firefox (ESR version recommended)"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:222
#, no-c-format
msgid "Opera"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:223
#, no-c-format
msgid "Mobile browsers: Android, iPhone"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:228
#, no-c-format
msgid "A build system, such as Ant or Maven, to automate execution of tests during build process (recommended)"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:235
#, no-c-format
msgid "Note that running tests on an Extended Support Release (ESR) version of Firefox is recommended because of the frequent release cycle of Firefox, which often cause tests to fail. Download an ESR release of Firefox from <link xlink:href=\"http://www.mozilla.org/en-US/firefox/organizations/all.html\">http://www.mozilla.org/en-US/firefox/organizations/all.html</link>. Install it alongside your normal Firefox install (do not overwrite)."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:244
#, no-c-format
msgid "For Mac OS X, note the issue mentioned in <xref linkend=\"testbench.known-issues.firefox-mac\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:251
#, no-c-format
msgid "Continuous Integration Compatibility"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:253
#, no-c-format
msgid "Continuous integration means automatic compilation and testing of applications frequently, typically at least daily, but ideally every time when code changes are committed to the source repository. This practice allows catching integration problems early and finding the changes that first caused them to occur."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:261
#, no-c-format
msgid "You can make unit tests with Vaadin TestBench just like you would do any other Java unit tests, so they work seamlessly with continuous integration systems. Vaadin TestBench is tested to work with at least TeamCity and Hudson/Jenkins build management and continuous integration servers, which all have special support for the JUnit unit testing framework."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:271
#, no-c-format
msgid "Licensing and Trial Period"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:273
#, no-c-format
msgid "You can download Vaadin TestBench from Vaadin Directory and try it out for a free 30-day trial period, after which you are required to acquire the needed licenses. You can purchase licenses from the Directory. A license for Vaadin TestBench is also included in the Vaadin Pro Account subscription."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:284
#, no-c-format
msgid "Installing Vaadin TestBench"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:286
#, no-c-format
msgid "Installation of Vaadin TestBench covers the following tasks:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:292
#, no-c-format
msgid "Download and unpack the Vaadin TestBench installation package"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:295
#, no-c-format
msgid "Install Vaadin TestBench Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:298
#, no-c-format
msgid "Install Vaadin TestBench Library"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:302
#, no-c-format
msgid "Which modules you need to install depends on whether you are developing tests or running existing tests. Two basic installation types are covered in these instructions:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:310
#, no-c-format
msgid "Test development installation on a workstation"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:313
#, no-c-format
msgid "Distributed grid installation"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:318
#, no-c-format
msgid "Test Development Installation"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:320
#, no-c-format
msgid "In a typical test development setup, you install Vaadin TestBench on a workstation. You can use the TestBench Recorder to record test cases and export them as JUnit test case stubs. This is especially recommended if you are new to Vaadin TestBench and do not want to code from scratch. You can install the Recorder in Firefox as described in <xref linkend=\"testbench.installation.recorder\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:329
#, no-c-format
msgid "You may find it convenient to develop and execute tests under an IDE such as Eclipse. The special support for running JUnit test cases in Eclipse is described in <xref linkend=\"testbench.development.eclipse\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:335
#, no-c-format
msgid "In such a test development setup, you do not need a grid hub or nodes. However, if you develop tests for a grid, you can run the tests, the grid hub, and one node all in your development workstation. A distributed setup is described in the following section."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:344
#, no-c-format
msgid "A Distributed Testing Environment"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:346
#, no-c-format
msgid "Vaadin TestBench supports distributed execution of tests in a grid. A test grid consists of the following categories of hosts:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:353
#, no-c-format
msgid "One or more test servers executing the tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:356
#, no-c-format
msgid "A grid hub"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:359
#, no-c-format
msgid "Grid nodes"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:363
#, no-c-format
msgid "The components of a grid setup are illustrated in <xref linkend=\"figure.testbench.architecture\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:369
#, no-c-format
msgid "Vaadin TestBench Grid Setup"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:380
#, no-c-format
msgid "The grid hub is a service that handles communication between the JUnit test runner and the nodes. The nodes are services that perform the actual execution of test commands in the browser."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:386
#, no-c-format
msgid "The hub requires very little resources, so you would typically run it either in the test server or on one of the nodes. You can run the tests, the hub, and one node all in one host, but in a fully distributed setup, you install the Vaadin TestBench components on separate hosts."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:393
#, no-c-format
msgid "Controlling browsers over a distributed setup requires using a remote WebDriver. Grid development and use of the hub and nodes is described in <xref linkend=\"testbench.grid\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:401
#, no-c-format
msgid "Downloading and Unpacking the Installation Package"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:403
#, no-c-format
msgid "First, download the installation package <filename>vaadin-testbench-&version.testbench;.zip</filename> and extract the installation package where you can find it."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:410
#, no-c-format
msgid "Windows"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:412
#, no-c-format
msgid "In Windows, use the default ZIP decompression feature to extract the package into your chosen directory, for example, <filename>C:\\dev</filename>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:419
#, no-c-format
msgid "Windows Zip Decompression Problem"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:421
#, no-c-format
msgid "The default decompression program in Windows XP and Vista as well as some versions of WinRAR cannot unpack the installation package properly in certain cases. Decompression can result in an error such as: \"The system cannot find the file specified.\" This can happen because the default decompression program is unable to handle long file paths where the total length exceeds 256 characters. This can occur, for example, if you try to unpack the package under Desktop. You should unpack the package directly into <filename>C:\\dev</filename> or some other short path or use another decompression program."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:437
#, no-c-format
msgid "Linux, MacOS X, and other UNIX"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:439
#, no-c-format
msgid "In Linux, Mac OS X, and other UNIX-like systems, you can use Info-ZIP or other ZIP software with the command:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:444
#, no-c-format
msgid "<prompt>$</prompt> <command>unzip</command> <parameter>vaadin-testbench-&version.testbench;.zip</parameter>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:446
#, no-c-format
msgid "The contents of the installation package will be extracted under the current directory."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:451
#, no-c-format
msgid "In Mac OS X, you can also double-click the package to extract it under the current folder in a folder with the same name as the package."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:459
#, no-c-format
msgid "Installation Package Contents"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:461
#, no-c-format
msgid "The installation package contains the following:"
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:467
#, no-c-format
msgid "documentation"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:469
#, no-c-format
msgid "The documentation folder contains the TestBench library API documentation, a PDF excerpt of this chapter of Book of Vaadin, and the license."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:477
#, no-c-format
msgid "example"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:479
#, no-c-format
msgid "The example folder provides TestBench examples. An example Maven configuration POM is given, as well as the JUnit test Java source files. For a description of the contents, see <xref linkend=\"testbench.installation.examples\"/>."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:488
#, no-c-format
msgid "maven"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:490
#, no-c-format
msgid "The Maven folder contains version of the Vaadin TestBench libraries that you can install in your local Maven repository. Please follow the instructions in <xref linkend=\"testbench.development.maven\"/>."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:499
#, no-c-format
msgid "vaadin-testbench-recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:501
#, no-c-format
msgid "This folder constains the Vaadin TestBench Recorder, which you can install in Firefox. Please follow the instructions in <xref linkend=\"testbench.installation.recorder\"/>."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:509
#, no-c-format
msgid "vaadin-testbench-standalone-&version.testbench;.jar"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:511
#, no-c-format
msgid "This is the Vaadin TestBench library. It is a standalone library that includes the Selenium WebDriver and many other required libraries. The library includes the sources and the JavaDoc."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:523
#, no-c-format
msgid "Example Contents"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:525
#, no-c-format
msgid "The <filename>example/maven</filename> folder provides a number of examples for using Vaadin TestBench. The source code for the application to be tested, a desktop calculator application, is given in the <filename>src/main/java</filename> subfolder."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:532
#, no-c-format
msgid "The tests examples given under the <filename>src/test/java</filename> subfolder, in the <filename>com/vaadin/testbenchexample</filename> package subfolder, are as follows:"
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:540
#, no-c-format
msgid "SimpleCalculatorITCase.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:542
#, no-c-format
msgid "Demonstrates the basic use of WebDriver. Interacts with the buttons in the user interface by clicking them and checks the resulting value. Uses <methodname>By.id()</methodname> to access the elements."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:551
#, no-c-format
msgid "LoopingCalculatorITCase.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:553
#, no-c-format
msgid "Otherwise as the simple example, but shows how to use looping to produce programmatic repetition to create a complex use case."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:561
#, no-c-format
msgid "ScreenshotITCase.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:563
#, no-c-format
msgid "Shows how to compare screenshots, as described in <xref linkend=\"testbench.screenshot.comparison\"/>. Some of the test cases include random input, so they require masked screenshot comparison to mask the random areas out."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:570
#, no-c-format
msgid "The example is ignored by default with an <literal>@Ignore</literal> annotation, because the included images were taken with a specific browser on a specific platform, so if you use another environment, they will fail. If you enable the test, you will need to run the tests, copy the error images to the reference screenshot folder, and mask out the areas with the alpha channel. Please see the <filename>example/Screenshot_Comparison_Tests.pdf</filename> for details about how to enable the example and how to create the masked reference images."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:585
#, no-c-format
msgid "SelectorExamplesITCase.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:587
#, no-c-format
msgid "This example shows how to use different selectors:"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:592
#, no-c-format
msgid "<methodname>By.id()</methodname> - selecting by identifier"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:593
#, no-c-format
msgid "<methodname>By.xpath()</methodname> - selecting by an XPath expression"
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:598
#, no-c-format
msgid "VerifyExecutionTimeITCase.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:600
#, no-c-format
msgid "Shows how to time the execution of a test case and how to report it."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:607
#, no-c-format
msgid "AdvancedCommandsITCase.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:609
#, no-c-format
msgid "Demonstrates how to test tooltips (<xref linkend=\"testbench.development.tooltip\"/>) and context menus. Uses component IDs, XPath expressions, as well as CSS selectors to find the elements to check."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:618
#, no-c-format
msgid "pageobjectexample/PageObjectExampleITCase.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:620
#, no-c-format
msgid "Shows how to create maintanable tests using the <emphasis>Page Object Pattern</emphasis> that separates the low-level page structure from the business logic, as described in <xref linkend=\"testbench.development.maintainable\"/>. The page object classes that handle low-level interaction with the application views are in the <filename>pageobjects</filename> subpackage."
msgstr ""

#. Tag: filename
#: chapter-testbench.xml:632
#, no-c-format
msgid "bdd/SimpleCalculation.java"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:634
#, no-c-format
msgid "Shows how to develop tests following the <emphasis>behavior-driven development</emphasis> (BDD) model, by using the <link xlink:href=\"http://jbehave.org\">JBehave framework</link>. <filename>SimpleCalculation.java</filename> defines a JUnit-based user story with one scenario, which is defined in <filename>CalculatorSteps.java</filename>. The scenario reuses the page objects defined in the page object example (see above) for low-level application view access and control."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:649
#, no-c-format
msgid "For information about running the examples with Maven, see <xref linkend=\"testbench.development.maven\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:656
#, no-c-format
msgid "Installing the Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:658
#, no-c-format
msgid "You can use the Vaadin TestBench Recorder in a test development environment to record test cases and to export them as JUnit test case stubs, which you can then develop further. This gives you a quick start when you are learning to use TestBench. Later you can use the Recorder to identify the HTML DOM paths of the user interface elements which you want to test."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:667
#, no-c-format
msgid "After extracting the files from the installation package, do the following:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:673
#, no-c-format
msgid "Change to the <filename>vaadin-testbench-recorder</filename> directory under the installation directory."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:676 chapter-testbench.xml:993
#, no-c-format
msgid "Open Mozilla Firefox"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:679
#, no-c-format
msgid "Either drag and drop the <filename>vaadin-testbench-recorder-&version.testbench;.xpi</filename> to an open Firefox window or open it from the menu with <menuchoice><guimenu>File</guimenu><guimenuitem>Open File</guimenuitem></menuchoice>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:688
#, no-c-format
msgid "Firefox will ask if you want to install the TestBench Recorder extension. Click <guibutton>Install</guibutton>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:694
#, no-c-format
msgid "Installing Vaadin TestBench Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:706
#, no-c-format
msgid "After the installation of the add-on is finished, Firefox offers to restart. Click <guibutton>Restart Now</guibutton>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:713
#, no-c-format
msgid "Installation of a new version of Vaadin TestBench Recorder will overwrite an existing previous version."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:718
#, no-c-format
msgid "After Firefox has restarted, navigate to a Vaadin application for which you want to record test cases, such as <ulink url=\"http://demo.vaadin.com/sampler\">http://demo.vaadin.com/sampler</ulink>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:726
#, no-c-format
msgid "Installing Browser Drivers"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:728
#, no-c-format
msgid "Whether developing tests with the WebDriver in the workstation or running tests in a grid, using some browsers requires that a browser driver is installed."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:736
#, no-c-format
msgid "Download the latest browser driver"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:740
#, no-c-format
msgid "Internet Explorer (Windows only) - install <filename>IEDriverServer.exe</filename> from:"
msgstr ""

#. Tag: link
#: chapter-testbench.xml:745
#, no-c-format
msgid "http://code.google.com/p/selenium/downloads/list"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:749
#, no-c-format
msgid "Chrome - install ChromeDriver (a part of the Chromium project) for your platform from:"
msgstr ""

#. Tag: link
#: chapter-testbench.xml:755
#, no-c-format
msgid "http://code.google.com/p/chromedriver/downloads/list"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:761
#, no-c-format
msgid "Add the driver executable to PATH <emphasis>or</emphasis> define it as a system property in the application using WebDriver locally, or in distributed use give it as a command-line parameter to the grid node service, as described in <xref linkend=\"testbench.grid.node\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:771
#, no-c-format
msgid "Test Node Configuration"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:773
#, no-c-format
msgid "If you are running the tests in a grid environment, you need to make some configuration to the test nodes to get more stable results."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:778
#, no-c-format
msgid "Further configuration is provided in command-line parameters when starting the node services, as described in <xref linkend=\"testbench.grid.node\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:784
#, no-c-format
msgid "Operating system settings"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:786
#, no-c-format
msgid "Make any operating system settings that might interfere with the browser and how it is opened or closed. Typical problems include crash handler dialogs."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:791
#, no-c-format
msgid "On Windows, disable error reporting in case a browser crashes as follows:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:797
#, no-c-format
msgid "Open <menuchoice><guimenu>Control Panel</guimenu><guimenuitem>System</guimenuitem></menuchoice>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:802
#, no-c-format
msgid "Select the <guilabel>Advanced</guilabel> tab"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:807
#, no-c-format
msgid "Select <guilabel>Error reporting</guilabel>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:812
#, no-c-format
msgid "Check that <guilabel>Disable error reporting</guilabel> is selected"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:817
#, no-c-format
msgid "Check that <guilabel>But notify me when critical errors occur</guilabel> is not selected"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:825
#, no-c-format
msgid "Settings for Screenshots"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:827
#, no-c-format
msgid "The screenshot comparison feature requires that the user interface of the browser stays constant. The exact features that interfere with testing depend on the browser and the operating system."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:833
#, no-c-format
msgid "In general:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:839
#, no-c-format
msgid "Disable blinking cursor"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:844
#, no-c-format
msgid "Use identical operating system themeing on every host"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:849
#, no-c-format
msgid "Turn off any software that may suddenly pop up a new window"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:854
#, no-c-format
msgid "Turn off screen saver"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:860
#, no-c-format
msgid "If using Windows and Internet Explorer, you should give also the following setting:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:867
#, no-c-format
msgid "Turn on <guilabel>Allow active content to run in files on My Computer</guilabel> under <guilabel>Security settings</guilabel>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:879
#, no-c-format
msgid "Preparing an Application for Testing"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:881
#, no-c-format
msgid "TestBench can usually be used for testing Vaadin applications as they are, especially if just taking screenshots."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:886
#, no-c-format
msgid "Depending on the selector type that you use later to select HTML elements, they can be vulnerable to logically irrelevant changes in the HTML DOM or component structure. The structure may change because of your layout or UI logic, or if a new Vaadin version has significant changes."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:893
#, no-c-format
msgid "To make UIs more robust for testing, you can set a unique <emphasis>component ID</emphasis> for specific components with <methodname>setId()</methodname>. You can then use it in Vaadin, XPath, or ID selectors, as explained later in <xref linkend=\"testbench.recorder.selectors\"/>."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:901
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[public class UIToBeTested extends UI {\n"
"    @Override\n"
"    protected void init(VaadinRequest request) {\n"
"        final VerticalLayout content = new VerticalLayout();\n"
"        setContent(content);\n"
"        \n"
"        // Create a button\n"
"        Button button = new Button(\"Push Me!\");\n"
"        \n"
"        // Optional: give the button a unique ID\n"
"        button.setId(\"main.button\");\n"
"        \n"
"        // Set the tooltip\n"
"        button.setDescription(\"This is a tip\");\n"
"\n"
"        // Do something when the button is clicked\n"
"        button.addClickListener(new ClickListener() {\n"
"            @Override\n"
"            public void buttonClick(ClickEvent event) {\n"
"                // This label will not have a set ID\n"
"                content.addComponent(new Label(\"Thanks!\"));\n"
"            }\n"
"        });\n"
"        content.addComponent(button);\n"
"    }\n"
"}]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:903
#, no-c-format
msgid "The application is shown in <xref linkend=\"figure.testbench.preparing.application-to-be-tested\"/>, with the button already clicked."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:910
#, no-c-format
msgid "A Simple Application To Be Tested"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:921
#, no-c-format
msgid "The button would be rendered as a HTML element: <literal>&lt;div id=\"main.button\" ...&gt;...&lt;/div&gt;</literal>. The DOM element would then be accessible from the HTML page with a WebDriver call such as: <literal>driver.findElement(By.id=\"main.button\")</literal>. For the label, which does not have an ID, the path would be from the page root. A recorded test case stub for the above application is given in <xref linkend=\"testbench.development.stub\"/>, which is further refined in this chapter."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:932
#, no-c-format
msgid "As a similar method, you can add a unique CSS class name for a component to enable using the CSS selector to select it. You can use the CSS class names and IDs also in XPath selectors."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:942
#, no-c-format
msgid "Using Vaadin TestBench Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:944
#, no-c-format
msgid "The Vaadin TestBench Recorder is used for recording and exporting JUnit test stubs that you can then develop further."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:949
#, no-c-format
msgid "The most important role for using the Recorder is to identify all user interface elements that you want to test - you can do all other test logic by coding. The elements are identified by a <emphasis>selector</emphasis> (or locator), which selects an element on which tests are made. By default, the Recorder records the paths using a <emphasis>Vaadin selector</emphasis>, where the root of the path is the UI element and the path consists of widgets. The path can also be an XPath or a CSS selector. It can use an ID that you set for a component in the application code."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:960
#, no-c-format
msgid "You can play back recoded test cases and use the Recorder to make assertions and take screenshots for screen capture comparison. Then, you export the test stubs as JUnit Java source files which you can then develop further."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:967
#, no-c-format
msgid "Recorder Workflow"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:978
#, no-c-format
msgid "The Recorder is available only for Mozilla Firefox. To run the recorded tests in other browsers, you need to export them as JUnit tests and launch the other browsers with the WebDriver, as described later."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:985
#, no-c-format
msgid "Starting the Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:987
#, no-c-format
msgid "To start the Recorder:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:996
#, no-c-format
msgid "Open the page with the application that you want to test"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:999
#, no-c-format
msgid "Select <menuchoice><guimenu>Tools</guimenu><guimenuitem>Vaadin TestBench Recorder</guimenuitem></menuchoice> in the Firefox menu"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1004
#, no-c-format
msgid "Starting Vaadin TestBench Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1017
#, no-c-format
msgid "The Vaadin TestBench Recorder window will open, as shown in <xref linkend=\"figure.testbench.recorder.recording-1\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1023
#, no-c-format
msgid "Vaadin TestBench Recorder Running"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1034
#, no-c-format
msgid "Recording is automatically enabled when the Recorder starts. This is indicated by the pressed <inlinegraphic fileref=\"img/testbench/inline/inline-record-button.png\"/> <guibutton>Record</guibutton> button."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1043
#, no-c-format
msgid "Recording"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1045
#, no-c-format
msgid "While recording, you can interact with the application in (almost) any way you like. The Recorder records the interaction as commands in a test script, which is shown in tabular format in the Table tab and as HTML source code in the Source tab."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1053
#, no-c-format
msgid "User Interaction Recorded as Commands"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1064
#, no-c-format
msgid "Please note the following:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1070
#, no-c-format
msgid "Changing browser tabs or opening a new browser window is not recommended, as any clicks and other actions will be recorded"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1076
#, no-c-format
msgid "Passwords are considered to be normal text input and are stored in plain text"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1083
#, no-c-format
msgid "While recording, you can insert various commands, such as assertions, by selecting the command from the Command list. You can also right-click on an element in your UI and select an assertion command. Doing so will automatically fill the asserted value in Recorder."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1090
#, no-c-format
msgid "When you are finished, click the <inlinegraphic fileref=\"img/testbench/inline/inline-record-button.png\"/> <guibutton>Record</guibutton> button to stop recording."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1098
#, no-c-format
msgid "Selectors"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1100
#, no-c-format
msgid "The Recorder supports various <emphasis>selectors</emphasis> (or locators) to find the HTML elements that are interacted upon and asserted. By default, Recorder uses the <emphasis>Vaadin selector</emphasis>, which finds the elements by a UI identifier, a possible component ID, and a widget hierarchy path."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1108
#, no-c-format
msgid "You can find elements also by a plain XPath expression, an element ID, CSS style class, etc. The selectors are exported with the JUnit test cases as corresponding Vaadin or Selenium selector methods, described in <xref linkend=\"testbench.development.selectors\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1115
#, no-c-format
msgid "Some selectors are not applicable to all elements, for example if an element does not have an ID or it is outside the Vaadin application. In such case, another selector is used according to a preference order. You can change the order of the preferred selectors by selecting <menuchoice><guimenu>Options</guimenu><guisubmenu>Options</guisubmenu><guimenuitem>Locator Builders</guimenuitem></menuchoice> and dragging the selectors (or locators) to a preferred order. Normally, the Vaadin selector should be at top of the list."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1127
#, no-c-format
msgid "Selector Robustness"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1129
#, no-c-format
msgid "As mentioned in <xref linkend=\"testbench.preparing\"/>, the selectors have differences in their robustness, which is important to avoid failed tests if there are irrelevant changes in the HTML DOM tree."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1135
#, no-c-format
msgid "The Vaadin selector (<literal>vaadin</literal> in Recorder and <methodname>By.vaadin()</methodname> in WebDriver) uses the logical widget hierarchy to find the HTML element to test, instead of the exact DOM structure. This makes it rather robust, though still vulnerable to irrelevant changes in the exact component hierarchy."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1143
#, no-c-format
msgid "The XPath selector can be highly vulnerable to changes in the DOM path if the path is given exactly from the body element of the page. It is, however, very flexible, and can be used in robust ways, for example, by selecting by HTML element and a CSS class name or an attribute value."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1151
#, no-c-format
msgid "You can likewise use a CSS selector to select specific components by CSS class in a robust way."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1159
#, no-c-format
msgid "Playing Back Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1161
#, no-c-format
msgid "After you have stopped recording, reset the application to the initial state and press <inlinegraphic fileref=\"img/testbench/inline/inline-play-button.png\"/> <guibutton>Play current test</guibutton> to run the test again. You can use the <literal>?restartApplication</literal> parameter for an application in the URL to restart it."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1170
#, no-c-format
msgid "You can also play back tests saved in the HTML format by first opening a test in the Recorder with <menuchoice><guimenu>File</guimenu><guimenuitem>Open</guimenuitem></menuchoice>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1176
#, no-c-format
msgid "You can use the <inlinegraphic fileref=\"img/testbench/inline/inline-slider-fastslow.png\"/> slider to control the playback speed, click <guibutton>Pause</guibutton> to interrupt the execution and <guibutton>Resume</guibutton> to continue. While paused, you can click <guibutton>Step</guibutton> to execute the script step-by-step."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1185
#, no-c-format
msgid "Check that the test works as intended and no unintended or invalid commands are found; a test should run without errors."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1192
#, no-c-format
msgid "Editing Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1194
#, no-c-format
msgid "While the primary purpose of using the Recorder is to identify all user interface elements to be tested, you can also edit the tests at this point. You can insert various commands, such as assertions or taking a screenshot, in the test script during or after recording."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1201
#, no-c-format
msgid "You insert a command by selecting an insertion point in the test script and right-clicking an element in the browser. A context menu opens and shows a selection of Recorder commands at the bottom. Selecting <guimenuitem>Show All Available Commands</guimenuitem> shows more commands. Commands inserted from the sub-menu are automatically added to the top-level context menu."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1210
#, no-c-format
msgid "shows adding an assertion after clicking the button in the example application."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1216
#, no-c-format
msgid "Inserting commands in a test script"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1227
#, no-c-format
msgid "Inserting a command from the context menu automatically selects the command in the <guilabel>Command</guilabel> field and fills in the target and value parameters."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1233
#, no-c-format
msgid "You can also select the command manually from the <guilabel>Command</guilabel> list. The new command or comment will be added at the selected location, moving the selected location down. If the command requires a target element, click <guilabel>Select</guilabel> and then click an element in your application. A reference to the element is shown in the <guilabel>Target</guilabel> field and you can highlight the element by clicking <guilabel>Show</guilabel>. If the command expects some value, such as for comparing the element value, give it in the <guilabel>Value</guilabel> field."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1245
#, no-c-format
msgid "Commands in a test script can be changed by selecting a command and changing the command, target, or value."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1252
#, no-c-format
msgid "Exporting Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1254
#, no-c-format
msgid "Once you are satisfied with a test case, you need to export it as a JUnit test case stub."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1259
#, no-c-format
msgid "You can save a test by selecting <menuchoice><guimenu>File</guimenu><guisubmenu>Export Test Case As...</guisubmenu><guimenuitem>JUnit 4 (Vaadin TestBench)</guimenuitem></menuchoice>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1267
#, no-c-format
msgid "Exporting Test Case as JUnit Test"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1278
#, no-c-format
msgid "In the dialog that opens, enter a file name for the Java source file. The file contains a Java class with name <classname>Testcase</classname>, so you might want to name the file as <filename>Testcase.java</filename>. You can rename the class later."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1287
#, no-c-format
msgid "Saving Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1289
#, no-c-format
msgid "While exporting tests as JUnit tests is the normal case, the Recorder also allows saving test cases and test suites in a HTML format that can be loaded back in the Recorder. Vaadin TestBench does not support other use for these saved tests, but you may still find the feature useful if you like to develop test cases more with the Recorder."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1300
#, no-c-format
msgid "Developing JUnit Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1302
#, no-c-format
msgid "Tests are developed using the Selenium WebDriver, which is augmented with Vaadin TestBench API features useful for testing Vaadin applications."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1307
#, no-c-format
msgid "Perhaps the easiest way to start developing tests is to use the Recorder to create a JUnit test stub, which is described in the next section. The main purpose of the recorder is to help identify the HTML DOM paths of the user interface elements that you want to interact with and use for assertions. Once you get the hang of coding tests, you should be able to do it without using the Recorder. Working with component IDs and using a browser debugger, such as Firebug, is usually the easiest way to find out the DOM paths. You can also use the Recorder just to find the paths, and copy and paste them directly to your source code without going through the export hassle."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1319
#, no-c-format
msgid "While this section describes the development of JUnit tests, Vaadin TestBench and the WebDriver are in no way specific to JUnit and you can use any test execution framework, or just regular Java applications, to develop TestBench tests."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1327
#, no-c-format
msgid "Starting From a Stub"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1329
#, no-c-format
msgid "Let us assume that you recorded a simple application, as described earlier, and exported it as a JUnit stub. You can add it to a project in a suitable package. You may want to keep your test classes in a separate source tree in your application project, or in an altogether separate project, so that you do not have to include them in the web application WAR. Having them in the same project may be nicer for version control purposes."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1339
#, no-c-format
msgid "You need to perform at least the following routine tasks:"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1344
#, no-c-format
msgid "Rename the package"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1345
#, no-c-format
msgid "Rename the class"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1346
#, no-c-format
msgid "Organize imports"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1347
#, no-c-format
msgid "Check the base URL"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1348
#, no-c-format
msgid "Clean up unnecessary code"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1351
#, no-c-format
msgid "A JUnit stub will look somewhat as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1355
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[package com.example.tests;\n"
"\n"
"import org.junit.*;\n"
"import static org.junit.Assert.*;\n"
"...\n"
"import com.vaadin.testbench.By;\n"
"import com.vaadin.testbench.TestBench;\n"
"import com.vaadin.testbench.TestBenchTestCase;\n"
"import com.vaadin.testbench.ScreenshotOnFailureRule;\n"
"\n"
"public class Testcase extends TestBenchTestCase {\n"
"        private String baseUrl;\n"
"        private StringBuffer verificationErrors = new StringBuffer();\n"
"    ...]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1357
#, no-c-format
msgid "The <parameter>verificationErrors</parameter> is used to collect some errors in some recorded commands, but can be removed if such commands are not used. You can also use it to collect non-fatal errors, for example screenshot comparison errors, and only fail on logic errors."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1365 chapter-testbench.xml:1732
#, no-c-format
msgid "Test Setup"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1367
#, no-c-format
msgid "The set-up method, annotated with <literal>@Before</literal>, makes the basic configuration for the test. Most importantly, it creates the <classname>WebDriver</classname> instance, which is for Firefox by default. Drivers for different browsers extend the <classname>RemoteWebDriver</classname> class - see the API type hierarchy for the complete list."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1376
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[    @Before\n"
"    public void setUp() throws Exception {\n"
"        setDriver(TestBench.createDriver(new FirefoxDriver()));\n"
"        baseUrl = \"http://localhost:8080/myapp\";\n"
"    }]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1378
#, no-c-format
msgid "Check that the <parameter>baseUrl</parameter> is the correct URL for the application. It might not be."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1385
#, no-c-format
msgid "Test Case Stub"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1387
#, no-c-format
msgid "The test case methods are marked with <literal>@Test</literal> annotation. They normally start by calling the <methodname>get()</methodname> method in the driver. This loads the URL in the browser."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1394
#, no-c-format
msgid "Actual test commands usually call the <methodname>findElement()</methodname> method in the driver to get hold of an HTML element to work with. The button has the <literal>main.button</literal> ID, as we set that ID for the <classname>Button</classname> object with the <methodname>setId()</methodname> method in the application. The HTML element is represented as a <classname>WebElement</classname> object."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1405
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[@Test\n"
"public void testCase() throws Exception {\n"
"    driver.get(concatUrl(baseUrl, \"/myapp\"));\n"
"\n"
"    // Check the button caption\n"
"    assertEquals(\"Push Me!\", driver.findElement(By.vaadin(\n"
"        \"bookexamplestobetested::PID_Smain.button\")).getText());\n"
"\n"
"    // Click the button\n"
"    driver.findElement(By.vaadin(\n"
"        \"bookexamplestobetested::PID_Smain.button\")).click();\n"
"\n"
"    // Check the result\n"
"    assertEquals(\"Thanks!\", driver.findElement(By.vaadin(\n"
"        \"bookexamplestobetested::/VVerticalLayout[0]/\"+\n"
"        \"ChildComponentContainer[1]/VLabel[0]\")).getText());\n"
"}]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1407
#, no-c-format
msgid "The <methodname>get()</methodname> call appends the application path to the base URL. If it is already included in the base URL, you can remove it."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1415
#, no-c-format
msgid "After Testing"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1417
#, no-c-format
msgid "Finally after running all the test cases, the method annotated with <literal>@After</literal> is called. Calling <methodname>quit()</methodname> for the driver closes the browser window."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1424
#, no-c-format
msgid "The stub includes code for collecting verification errors. If you do not collect those, as is often the case, you can remove the code."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1429
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[    @After\n"
"    public void tearDown() throws Exception {\n"
"        driver.quit();\n"
"\n"
"        String verificationErrorString =\n"
"            verificationErrors.toString();\n"
"        if (!\"\".equals(verificationErrorString)) {\n"
"            fail(verificationErrorString);\n"
"        }\n"
"    }]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1434
#, no-c-format
msgid "Finding Elements by Selectors"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1436
#, no-c-format
msgid "The Selenium WebDriver API provides a number of different <emphasis>selectors</emphasis> for finding HTML DOM elements. The available selectors are defined as static methods in the <classname>com.vaadin.testbench.By</classname> class. They create and return a <classname>By</classname> instance, which you can use for the <methodname>findElement()</methodname> method in <classname>WebDriver</classname>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1446
#, no-c-format
msgid "The ID, CSS class, and Vaadin selectors are described below. For others, we refer to the <link xlink:href=\"http://seleniumhq.org/docs/03_webdriver.html\">Selenium WebDriver API documentation</link>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1454
#, no-c-format
msgid "Finding by ID"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1456
#, no-c-format
msgid "Selecting elements by their HTML element <literal>id</literal> attribute is usually the easiest way to select elements. It requires that you use component IDs, as described in <xref linkend=\"testbench.preparing\"/>. The ID is used as is for the <literal>id</literal> attribute of the top element of the component. Selecting is done by the <methodname>By.id()</methodname> selector."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1466
#, no-c-format
msgid "For example, in the <filename>SimpleCalculatorITCase.java</filename> example, we use the component ID as follows to click on the calculator buttons:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1472
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[@Test\n"
"public void testOnePlusTwo() throws Exception {\n"
"    openCalculator();\n"
"\n"
"    // Click the buttons in the user interface\n"
"    getDriver().findElement(By.id(\"button_1\")).click();\n"
"    getDriver().findElement(By.id(\"button_+\")).click();\n"
"    getDriver().findElement(By.id(\"button_2\")).click();\n"
"    getDriver().findElement(By.id(\"button_=\")).click();\n"
"\n"
"    // Get the result label value\n"
"    assertEquals(\"3.0\", getDriver().findElement(\n"
"            By.id(\"display\")).getText());\n"
"}]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1474
#, no-c-format
msgid "The ID selectors are used extensively in the TestBench examples."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1480
#, no-c-format
msgid "Finding by Vaadin Selector"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1482
#, no-c-format
msgid "In addition to the Selenium selectors, Vaadin TestBench provides a <emphasis>Vaadin selector</emphasis>, which allows pointing to a Vaadin component by its layout widget path. The Recorder uses Vaadin selectors by default."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1489
#, no-c-format
msgid "You can create a Vaadin selector with the <methodname>By.vaadin()</methodname> method. You need to use the Vaadin <classname>By</classname>, defined in the <package>com.vaadin.testbench</package> package, which extends the Selenium <classname>By</classname>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1497
#, no-c-format
msgid "A Vaadin selector begins with a UI identifier. It is the URL path of the UI, but without any slashes or other special characters. For example, <literal>/book-examples/tobetested</literal> would be <literal>bookexamplestobetested</literal>. After the identifier, comes two colons \"<literal>::</literal>\", followed by a slash-delimited component path to the component to be selected. The elements in the component path are client-side classes of the Vaadin user interfacer components. For example, the server-side <classname>VerticalLayout</classname> component has <classname>VVerticalLayout</classname> client-side counterpart. All path elements except the leaves are component containers, usually layouts. The exact contained component is identified by its index in brackets."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1513
#, no-c-format
msgid "A reference to a component ID is given with a <literal>PID_S</literal> suffix to the ID."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1518
#, no-c-format
msgid "For example, if the ID is <literal>main.button</literal>, as it was set in the application example earlier, you could find and test it as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1524
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[// Get the button's element.\n"
"// Use the ID set with setId().\n"
"WebElement button = driver.findElement(By.vaadin(\n"
"    \"bookexamplestobetested::PID_Smain.button\"));\n"
"\n"
"// Get the caption text\n"
"assertEquals(\"Push Me!\", button.getText());\n"
"\n"
"// And click it\n"
"button.click();\n"
"\n"
"// Get the Label's element by full path\n"
"WebElement label = driver.findElement(By.vaadin(\n"
"    \"bookexamplestobetested::/VVerticalLayout[0]/\"+\n"
"    \"ChildComponentContainer[1]/VLabel[0]\"));\n"
"\n"
"// Make the assertion\n"
"assertEquals(\"Thanks!\", label.getText());]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1529
#, no-c-format
msgid "Finding by CSS Class"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1531
#, no-c-format
msgid "An element with a particular CSS style class name can be selected with the <methodname>By.className()</methodname> method. CSS selectors are useful for elements which have no ID, nor can be found easily from the component hierarchy, but do have a particular unique CSS style. Tooltips are one example, as they are floating <literal>div</literal> elements under the root element of the application. Their <literal>v-tooltip</literal> style makes it possible to select them as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1542
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[// Verify that the tooltip contains the expected text\n"
"String tooltipText = driver.findElement(\n"
"    By.className(\"v-tooltip\")).getText();]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1544
#, no-c-format
msgid "For a complete example, see the <filename>AdvancedCommandsITCase.java</filename> file in the examples."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1552 chapter-testbench.xml:1629
#, no-c-format
msgid "Running JUnit Tests in Eclipse"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1554
#, no-c-format
msgid "The Eclipse IDE integrates JUnit with nice control features. To run TestBench JUnit test cases in Eclipse, you need to do the following:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1561
#, no-c-format
msgid "Install the TestBench standalone JAR."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1567
#, no-c-format
msgid "If using a project created with the Vaadin Plugin for Eclipse, add the TestBench standalone library dependency in <filename>ivy.xml</filename>. It should be as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1573
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[<dependency org=\"com.vaadin\"\n"
"            name=\"vaadin-testbench\"\n"
"            rev=\"&version.testbench;\"/>]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1575
#, no-c-format
msgid "See <xref linkend=\"addons.eclipse\"/> for more details."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1581
#, no-c-format
msgid "Otherwise, add the TestBench standalone JAR from the installation package to a library folder in the project, such as <filename>lib</filename>. You should not put the library in <filename>WEB-INF/lib</filename> as it is not used by the Vaadin web application. Refresh the project by selecting it and pressing <keycap>F5</keycap>."
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1593
#, no-c-format
msgid "Right-click the project in Project Explorer and select <guilabel>Properties</guilabel>, and open the <guilabel>Java Build Path</guilabel> and the <guilabel>Libraries</guilabel> tab. Click <guibutton>Add JARs</guibutton>, navigate to the library folder, select the library, and click <guibutton>OK</guibutton>."
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1601
#, no-c-format
msgid "Switch to the <guilabel>Order and Export</guilabel> tab in the project properties. Make sure that the TestBench JAR is above the <filename>gwt-dev.jar</filename> (it may contain an old <filename>httpclient</filename> package), by selecting it and moving it with the <guibutton>Up</guibutton> and <guibutton>Down</guibutton> buttons."
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1610
#, no-c-format
msgid "Click <guibutton>OK</guibutton> to exit the project properties."
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1614
#, no-c-format
msgid "Right-click a test source file and select <menuchoice><guimenu>Run As</guimenu><guimenuitem>JUnit Test</guimenuitem></menuchoice>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1620
#, no-c-format
msgid "A JUnit view should appear, and it should open the Firefox browser, launch the application, run the test, and then close the browser window. If all goes well, you have a passed test case, which is reported in the JUnit view area in Eclipse, as illustrated in <xref linkend=\"figure.testbench.development.eclipse\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1637
#, no-c-format
msgid "If you are using some other IDE, it might support JUnit tests as well. If not, you can run the tests using Ant or Maven."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1644
#, no-c-format
msgid "Executing Tests with Ant"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1646
#, no-c-format
msgid "Apache Ant has built-in support for executing JUnit tests. To enable the support, you need to have the JUnit library <filename>junit.jar</filename> and its Ant integration library <filename>ant-junit.jar</filename> in the Ant classpath, as described in the Ant documentation."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1653
#, no-c-format
msgid "Once enabled, you can use the <literal>&lt;junit&gt;</literal> task in an Ant script. The following example assumes that the source files are located under a <filename>src</filename> directory under the current directory and compiles them to the <filename>classes</filename> directory. The the class path is defined with the <literal>classpath</literal> reference ID and should include the TestBench JAR and all relevant dependencies."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1663
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[<project default=\"run-tests\">\n"
"    <path id=\"classpath\">\n"
"        <fileset dir=\"lib\"\n"
"                 includes=\"vaadin-testbench-standalone-*.jar\" />\n"
"    </path>\n"
"\n"
"    <!-- This target compiles the JUnit tests. -->\n"
"    <target name=\"compile-tests\">\n"
"        <mkdir dir=\"classes\" />\n"
"        <javac srcdir=\"src\" destdir=\"classes\"\n"
"               debug=\"on\" encoding=\"utf-8\">\n"
"            <classpath>\n"
"                <path refid=\"classpath\" />\n"
"            </classpath>\n"
"        </javac>\n"
"    </target>\n"
"\n"
"    <!-- This target calls JUnit -->\n"
"    <target name=\"run-tests\" depends=\"compile-tests\">\n"
"        <junit fork=\"yes\">\n"
"            <classpath>\n"
"                <path refid=\"classpath\" />\n"
"                <pathelement path=\"classes\" />\n"
"            </classpath>\n"
"\n"
"            <formatter type=\"brief\" usefile=\"false\" />\n"
"                                \n"
"            <batchtest>\n"
"                <fileset dir=\"src\">\n"
"                    <include name=\"**/**.java\" />\n"
"                </fileset>\n"
"            </batchtest>\n"
"        </junit>\n"
"    </target>\n"
"</project>]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1665
#, no-c-format
msgid "You also need to deploy the application to test, and possibly launch a dedicated server for it."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1672
#, no-c-format
msgid "Executing Tests with Maven"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1674
#, no-c-format
msgid "Executing JUnit tests with Vaadin TestBench under Maven requires defining it as a dependency in any POM that needs to execute TestBench tests."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1679
#, no-c-format
msgid "A complete example of a Maven test setup is given in the <filename>example/maven</filename> folder in the installation package. Please see the <filename>README</filename> file in the folder for further instructions."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1687
#, no-c-format
msgid "Defining TestBench as a Dependency"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1689
#, no-c-format
msgid "You need to define the TestBench library as a dependency in the Maven POM of your project as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1694
#, no-c-format
msgid ""
"&lt;dependency&gt;\n"
"      &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n"
"      &lt;artifactId&gt;vaadin-testbench&lt;/artifactId&gt;\n"
"      &lt;version&gt;&version.testbench;&lt;/version&gt;\n"
"    &lt;/dependency&gt;"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1696
#, no-c-format
msgid "For instructions on how to create a new Vaadin project with Maven, please see <xref linkend=\"getting-started.maven\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1703
#, no-c-format
msgid "Running the Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1705
#, no-c-format
msgid "To compile and run the tests, simply execute the <literal>test</literal> lifecycle phase with Maven as follows:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:1710
#, no-c-format
msgid ""
"<prompt>$</prompt> <command>mvn</command> test\n"
"...\n"
"-----------------------------------------------------\n"
" T E S T S\n"
"-----------------------------------------------------\n"
"Running TestBenchExample\n"
"Tests run: 6, Failures: 1, Errors: 0, Skipped: 1, Time elapsed: 36.736 sec &lt;&lt;&lt; FAILURE!\n"
"\n"
"Results :\n"
"\n"
"Failed tests: \n"
"  testDemo(TestBenchExample):\n"
"      expected:&lt;[5/17/]12&gt; but was:&lt;[17.6.20]12&gt;\n"
"\n"
"Tests run: 6, Failures: 1, Errors: 0, Skipped: 1\n"
"..."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1712
#, no-c-format
msgid "The example configuration starts Jetty to run the application that is tested."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1717
#, no-c-format
msgid "If you have screenshot tests enabled, as mentioned in <xref linkend=\"testbench.installation.examples\"/>, you will get failures from screenshot comparison. The failed screenshots are written to the <filename>target/testbench/errors</filename> folder. To enable comparing them to \"expected\" screenshots, you need to copy the screenshots to the <filename>src/test/resources/screenshots/reference/</filename> folder. See <xref linkend=\"testbench.screenshots\"/> for more information regarding screenshots."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1734
#, no-c-format
msgid "Test configuration is done in a method annotated with <literal>@Before</literal>. The method is executed before each test case. In a JUnit stub exported from Recorder, this is done in the <methodname>setUp()</methodname> method."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1741
#, no-c-format
msgid "The basic configuration tasks are:"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1746
#, no-c-format
msgid "Set TestBench parameters"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1747
#, no-c-format
msgid "Create the web driver"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1748
#, no-c-format
msgid "Do any other initialization"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1752
#, no-c-format
msgid "TestBench Parameters"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1754
#, no-c-format
msgid "TestBench parameters are defined with static methods in the <classname>com.vaadin.testbench.Parameters</classname> class. The parameters are mainly for screenshots and documented in <xref linkend=\"testbench.screenshots\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1764
#, no-c-format
msgid "Creating and Closing a Web Driver"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1766
#, no-c-format
msgid "Vaadin TestBench uses Selenium WebDriver to execute tests in a browser. The <classname>WebDriver</classname> instance is created with the static <methodname>createDriver()</methodname> method in the <classname>TestBench</classname> class. It takes the driver as the parameter and returns it after registering it. The test cases must extend the <classname>TestBenchTestCase</classname> class, which manages the TestBench-specific features. You need to store the driver in the test case with <methodname>setDriver()</methodname>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1777
#, no-c-format
msgid "The basic way is to create the driver in a method annotated with the JUnit <literal>@Before</literal> annotation and close it in a method annotated with <literal>@After</literal>."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1783
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[public class AdvancedTest extends TestBenchTestCase {\n"
"    @Before\n"
"    public void setUp() throws Exception {\n"
"        ...\n"
"        setDriver(TestBench.createDriver(new FirefoxDriver()));\n"
"    }\n"
"    ...\n"
"    @After\n"
"    public void tearDown() throws Exception {\n"
"        driver.quit();\n"
"    }\n"
"}]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1785
#, no-c-format
msgid "This creates the driver for each test you have in the test class, causing a new browser instance to be opened and closed. If you want to keep the browser open between the tests, you can use <literal>@BeforeClass</literal> and <literal>@AfterClass</literal> methods to create and quit the driver. In that case, the methods as well as the driver instance have to be static."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1794
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[public class AdvancedTest extends TestBenchTestCase {\n"
"    static private WebDriver driver;\n"
"\n"
"    @BeforeClass\n"
"    static public void createDriver() throws Exception {\n"
"        driver = TestBench.createDriver(new FirefoxDriver());\n"
"    }\n"
"    ...\n"
"    @AfterClass\n"
"    static public void tearDown() throws Exception {\n"
"        driver.quit();\n"
"    }\n"
"}]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1797
#, no-c-format
msgid "Browser Drivers"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1799
#, no-c-format
msgid "Please see the API documentation of the <interfacename>WebDriver</interfacename> interface for a complete list of supported drivers, that is, classes implementing the interface."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1805
#, no-c-format
msgid "Both the Internet Explorer and Chrome require a special driver, as was noted in <xref linkend=\"testbench.installation.browserdrivers\"/>. The driver executable must be included in the operating system <literal>PATH</literal>, be given with a driver-specific system Java property:"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1814
#, no-c-format
msgid "Chrome: <parameter>webdriver.chrome.driver</parameter>"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1815
#, no-c-format
msgid "IE: <parameter>webdriver.ie.driver</parameter>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1818
#, no-c-format
msgid "You can set the property in Java with <methodname>System.setProperty(prop, key))</methodname> or pass it as a command-line parameter to the Java executable with <parameter>-Dwebdriver.chrome.driver=/path/to/driver</parameter>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1825
#, no-c-format
msgid "If you use an ESR version of Firefox, which is recommended for test stability, you need to the binary when creating the driver as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1830
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[FirefoxBinary binary =\n"
"    new FirefoxBinary(new File(\"/path/to/firefox_ESR_10\"));\n"
"driver = TestBench.createDriver(\n"
"    new FirefoxDriver(binary, new FirefoxProfile()));]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1835
#, no-c-format
msgid "Basic Test Case Structure"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1837
#, no-c-format
msgid "A typical test case does the following:"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1842
#, no-c-format
msgid "Open the URL"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1843
#, no-c-format
msgid "Navigate to desired state"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1845
#, no-c-format
msgid "Find a HTML element (<classname>WebElement</classname>) for navigation"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1846
#, no-c-format
msgid "Use <methodname>click()</methodname> and other commands to interact with the element"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1847
#, no-c-format
msgid "Repeat with different elements until desired state is reached"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1850
#, no-c-format
msgid "Find a HTML element (<classname>WebElement</classname>) to check"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1851
#, no-c-format
msgid "Get and assert the value of the HTML element"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:1852
#, no-c-format
msgid "Get a screenshot"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1855
#, no-c-format
msgid "The <classname>WebDriver</classname> allows finding HTML elements in a page in various ways, for example, with XPath expressions. The access methods are defined statically in the <classname>By</classname> class."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1861
#, no-c-format
msgid "These tasks are realized in the following test code:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1865
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[@Test\n"
"public void testCase1() throws Exception {\n"
"    driver.get(baseUrl + \"/mycontext/myui\");\n"
"    \n"
"    // Get the button's element.\n"
"    // (Actually the caption element inside the button.)\n"
"    // Use the component ID assigned with setId().\n"
"    WebElement button = driver.findElement(By.xpath(\n"
"        \"id('main.button'])/span/span\"));\n"
"    \n"
"    // Get the caption text\n"
"    assertEquals(\"Push Me!\", button.getText());\n"
"    \n"
"    // And click it. It's OK to click the caption element.\n"
"    button.click();\n"
"\n"
"    // Get the Label's element by its widget path.\n"
"    WebElement label = driver.findElement(By.vaadin(\n"
"        \"mycontextmyui::\"+\n"
"        \"/VVerticalLayout[0]/Slot[1]/VLabel[0]\"));\n"
"\n"
"    // Make the assertion\n"
"    assertEquals(\"Thanks!\", label.getText());\n"
"}]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1867
#, no-c-format
msgid "You can also use URI fragments in the URL to open the application at a specific state. <phrase condition=\"web\">For information about URI fragments, see <xref linkend=\"advanced.urifu\"/>.</phrase>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1873
#, no-c-format
msgid "You should use the JUnit assertion commands. They are static methods defined in the <package>org.junit.Assert</package> class, which you can import (for example) with:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1879
#, no-c-format
msgid "<![CDATA[import static org.junit.Assert.assertEquals;]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1881
#, no-c-format
msgid "Please see the <link xlink:href=\"http://seleniumhq.org/docs/03_webdriver.html#selenium-webdriver-api-commands-and-operations\">Selenium API documentation</link> for a complete reference of the element search methods in the <classname>WebDriver</classname> and <classname>By</classname> classes and for the interaction commands in the <classname>WebElement</classname> class."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1890
#, no-c-format
msgid "TestBench has a collection of its own commands, defined in the <interfacename>TestBenchCommands</interfacename> interface. You can get a command object that you can use by calling <literal>testBench(driver)</literal> in a test case."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1897
#, no-c-format
msgid "While you can develop tests simply with test cases as described above, for the sake of maintainability it is often best to modularize the test code further, such as to separate testing at the levels of business logic and the page layout. See <xref linkend=\"testbench.development.maintainable\"/> for information about using page objects for this purpose."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1907
#, no-c-format
msgid "Waiting for Vaadin"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1909
#, no-c-format
msgid "Selenium, on which Vaadin TestBench is based, is originally intended for regular web applications that load a page that is immediately rendered by the browser. In such applications, you can test the page elements immediately after the page is loaded. In Vaadin and other AJAX applications, rendering is done by JavaScript code asynchronously, so you need to wait until the server has given its response to an AJAX request and the JavaScript code finishes rendering the UI. Selenium supports AJAX applications by having special wait methods to poll the UI until the rendering is finished. In pure Selenium, you need to use the wait methods explicitly, and know what to use and when. Vaadin TestBench works together with the client-side engine of Vaadin framework to immediately detect when the rendering is finished. Waiting is implicit, so you do not normally need to insert any wait commands yourself."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1925
#, no-c-format
msgid "Waiting is automatically enabled, but it may be necessary to disable it in some cases. You can do that by calling <methodname>disableWaitForVaadin()</methodname> in the <interfacename>TestBenchCommands</interfacename> interface. You can call it in a test case as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1933
#, no-c-format
msgid "<![CDATA[testBench(driver).disableWaitForVaadin();]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1935
#, no-c-format
msgid "When disabled, you can wait for the rendering to finish by calling <methodname>waitForVaadin()</methodname> explicitly."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1940
#, no-c-format
msgid "<![CDATA[testBench(driver).waitForVaadin();]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1942
#, no-c-format
msgid "You can re-enable the waiting with <methodname>enableWaitForVaadin()</methodname> in the same interface."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1949
#, no-c-format
msgid "Testing Tooltips"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1951
#, no-c-format
msgid "Component tooltips show when you hover the mouse over a component. Events caused by hovering are not recorded by Recorder, so this interaction requires special handling when testing."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1957
#, no-c-format
msgid "Let us assume that you have set the tooltip as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1961
#, no-c-format
msgid ""
"<![CDATA[// Create a button with a component ID\n"
"Button button = new Button(\"Push Me!\");\n"
"button.setId(\"main.button\");\n"
"\n"
"// Set the tooltip        \n"
"button.setDescription(\"This is a tip\");]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1963
#, no-c-format
msgid "The tooltip of a component is displayed with the <methodname>showTooltip()</methodname> method in the <classname>TestBenchElementCommands</classname> interface. You should wait a little to make sure it comes up. The floating tooltip element is not under the element of the component, but you can find it by <literal>//div[@class='v-tooltip']</literal> XPath expression."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:1972
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[@Test\n"
"public void testTooltip() throws Exception {\n"
"    driver.get(appUrl);\n"
"    \n"
"    // Get the button's element.\n"
"    // Use the component ID given with setId().\n"
"    WebElement button = driver.findElement(By.xpath(\n"
"        \"//div[@id='main.button']/span/span\"));\n"
"    \n"
"    // Show the tooltip\n"
"    testBenchElement(button).showTooltip();\n"
"    \n"
"    // Check that the tooltip text matches\n"
"    assertEquals(\"This is a tip\", driver.findElement(\n"
"        By.xpath(\"//div[@class='v-tooltip']\")).getText());\n"
"    \n"
"    // Compare a screenshot just to be sure\n"
"    assertTrue(testBench(driver).compareScreen(\"tooltip\"));\n"
"}]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1977
#, no-c-format
msgid "Scrolling"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1979
#, no-c-format
msgid "Some Vaadin components, such as <classname>Table</classname> and <classname>Panel</classname> have a scrollbar. To get hold of the scrollbar, you must first find the component element. Then, you need to get hold of the <interfacename>TestBenchElementCommands</interfacename> interface from the <classname>WebElement</classname> with <methodname>testBenchElement(WebElement)</methodname>. The <methodname>scroll()</methodname> method in the interface scrolls a vertical scrollbar down the number of pixels given as the parameter. The <methodname>scrollLeft()</methodname> scrolls a horizontal scrollbar by the given number of pixels."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:1994
#, no-c-format
msgid "Testing Notifications"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:1996
#, no-c-format
msgid "When testing notifications, you will need to close the notification box. You need to get hold of the <interfacename>TestBenchElementCommands</interfacename> interface from the <classname>WebElement</classname> of the notification element with <methodname>testBenchElement(WebElement)</methodname>. The <methodname>closeNotification()</methodname> method in the interface closes the notification."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2008
#, no-c-format
msgid "Testing Context Menus"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2010
#, no-c-format
msgid "Opening context menus require special handling. You need to create a Selenium <classname>Actions</classname> object to perform a context click on a <classname>WebElement</classname>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2016
#, no-c-format
msgid "In the following example, we open a context menu in a <classname>Table</classname> component, find an item by its caption text, and click it."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2022
#, no-c-format
msgid ""
"<?pocket-size 70% ?><![CDATA[// Select the table body element\n"
"WebElement e = getDriver().findElement(\n"
"        By.className(\"v-table-body\"));\n"
"\n"
"// Perform context click action to open the context menu\n"
"new Actions(getDriver()).moveToElement(e)\n"
"        .contextClick(e).perform();\n"
"\n"
"// Select \"Add Comment\" from the opened menu\n"
"getDriver().findElement(\n"
"        By.xpath(\"//*[text() = 'Add Comment']\")).click();]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2024
#, no-c-format
msgid "The complete example is given in the <filename>AdvancedCommandsITCase.java</filename> example source file."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2031
#, no-c-format
msgid "Profiling Test Execution Time"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2033
#, no-c-format
msgid "It is not just that it works, but also how long it takes. Profiling test execution times consistently is not trivial, as a test environment can have different kinds of latency and interference. For example in a distributed setup, timings taken on the test server would include the latencies between the test server, the grid hub, a grid node running the browser, and the web server running the application. In such a setup, you could also expect interference between multiple test nodes, which all might make requests to a shared application server and possibly also share virtual machine resources."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2045
#, no-c-format
msgid "Furthermore, in Vaadin applications, there are two sides which need to be profiled: the server-side, on which the application logic is executed, and the client-side, where it is rendered in the browser. Vaadin TestBench includes methods for measuring execution time both on the server-side and the client-side."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2053
#, no-c-format
msgid "The <interfacename>TestBenchCommands</interfacename> interface offers the following methods for profiling test execution time:"
msgstr ""

#. Tag: methodname
#: chapter-testbench.xml:2060
#, no-c-format
msgid "totalTimeSpentServicingRequests()"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2062
#, no-c-format
msgid "Returns the total time (in milliseconds) spent servicing requests in the application on the server-side. The timer starts when you first navigate to the application and hence start a new session. The time passes only when servicing requests for the particular session. The timer is shared in the servlet session, so if you have, for example, multiple portlets in the same application (session), their execution times will be included in the same total."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2075
#, no-c-format
msgid "Notice that if you are also interested in the client-side performance for the last request, you must call the <methodname>timeSpentRenderingLastRequest()</methodname> before calling this method. This is due to the fact that this method makes an extra server request, which will cause an empty response to be rendered."
msgstr ""

#. Tag: methodname
#: chapter-testbench.xml:2086
#, no-c-format
msgid "timeSpentServicingLastRequest()"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2088
#, no-c-format
msgid "Returns the time (in milliseconds) spent servicing the last request in the application on the server-side. Notice that not all user interaction through the WebDriver cause server requests."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2095
#, no-c-format
msgid "As with the total above, if you are also interested in the client-side performance for the last request, you must call the <methodname>timeSpentRenderingLastRequest()</methodname> before calling this method."
msgstr ""

#. Tag: methodname
#: chapter-testbench.xml:2104
#, no-c-format
msgid "totalTimeSpentRendering()"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2106
#, no-c-format
msgid "Returns the total time (in milliseconds) spent rendering the user interface of the application on the client-side, that is, in the browser. This time only passes when the browser is rendering after interacting with it through the WebDriver. The timer is shared in the servlet session, so if you have, for example, multiple portlets in the same application (session), their execution times will be included in the same total."
msgstr ""

#. Tag: methodname
#: chapter-testbench.xml:2118
#, no-c-format
msgid "timeSpentRenderingLastRequest()"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2120
#, no-c-format
msgid "Returns the time (in milliseconds) spent rendering user interface of the application after the last server request. Notice that not all user interaction through the WebDriver cause server requests."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2127
#, no-c-format
msgid "If you also call the <methodname>timeSpentServicingLastRequest()</methodname> or <methodname>totalTimeSpentServicingRequests()</methodname>, you should do so before calling this method. The methods cause a server request, which will zero the rendering time measured by this method."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2139
#, no-c-format
msgid "Generally, only interaction with fields in the <emphasis>immediate</emphasis> mode cause server requests. This includes button clicks. Some components, such as <classname>Table</classname>, also cause requests otherwise, such as when loading data while scrolling. Some interaction could cause multiple requests, such as when images are loaded from the server as the result of user interaction."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2148
#, no-c-format
msgid "The following example is given in the <filename>VerifyExecutionTimeITCase.java</filename> file under the TestBench examples."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2154
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[@Test\n"
"public void verifyServerExecutionTime() throws Exception {\n"
"    openCalculator();\n"
"\n"
"    // Get start time on the server-side\n"
"    long currentSessionTime = testBench(getDriver())\n"
"            .totalTimeSpentServicingRequests();\n"
"\n"
"    // Interact with the application\n"
"    calculateOnePlusTwo();\n"
"\n"
"    // Calculate the passed processing time on the serve-side\n"
"    long timeSpentByServerForSimpleCalculation = testBench()\n"
"        .totalTimeSpentServicingRequests() - currentSessionTime;\n"
"\n"
"    // Report the timing\n"
"    System.out.println(\"Calculating 1+2 took about \"\n"
"            + timeSpentByServerForSimpleCalculation\n"
"            + \"ms in servlets service method.\");\n"
"\n"
"    // Fail if the processing time was critically long\n"
"    if (timeSpentByServerForSimpleCalculation > 30) {\n"
"        fail(\"Simple calculation shouldn't take \"\n"
"             + timeSpentByServerForSimpleCalculation + \"ms!\");\n"
"    }\n"
"\n"
"    // Do the same with rendering time\n"
"    long totalTimeSpentRendering =\n"
"            testBench().totalTimeSpentRendering();\n"
"    System.out.println(\"Rendering UI took \" +\n"
"            totalTimeSpentRendering + \"ms\");\n"
"    if (timeSpentByServerForSimpleCalculation > 400) {\n"
"        fail(\"Rendering UI shouldn't take \"\n"
"             + timeSpentByServerForSimpleCalculation + \"ms!\");\n"
"    }\n"
"\n"
"    // A regular assertion on the UI state\n"
"    assertEquals(\"3.0\", getDriver().findElement(\n"
"                        By.id(\"display\")).getText());\n"
"}]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2159
#, no-c-format
msgid "Creating Maintainable Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2161
#, no-c-format
msgid "The first important rule in developing tests is to keep them readable and maintainable. Otherwise, when the test fail, such as after refactoring the application code, the developers get impatient in trying to understand them to fix them, and easily disable them. Readability and maintainability can be improved with the Page Object Pattern described below."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2169
#, no-c-format
msgid "The second rule is to run the tests often. It is best to use a continuous integration server to run them at least once a day, or preferably on every commit."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2176
#, no-c-format
msgid "The Page Object Pattern"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2178
#, no-c-format
msgid "The Page Object Pattern aims to simplify and modularize testing application views. The pattern follows the design principle of <link xlink:href=\"http://en.wikipedia.org/wiki/Separation_of_concerns\">separation of concerns</link>, to handle different concerns in separate modules, while hiding information irrelevant to other tests by encapsulation."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2186
#, no-c-format
msgid "A <emphasis>page object</emphasis> has methods to interact with a view or a sub-view, and to retrieve values in the view. You also need a method to open the page and navigate to the proper view."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2192 chapter-testbench.xml:2214
#: chapter-testbench.xml:2321 chapter-testbench.xml:2456
#, no-c-format
msgid "For example:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2196
#, no-c-format
msgid ""
"<?pocket-size 70% ?><![CDATA[public class CalculatorPageObject\n"
"       extends TestBenchTestCase {\n"
"    @FindBy(id = \"button_=\")\n"
"    private WebElement equals;\n"
"    ...\n"
"\n"
"    /**\n"
"     * Opens the URL where the calculator resides.\n"
"     */\n"
"    public void open() {\n"
"        getDriver().get(\n"
"            \"http://localhost:8080/?restartApplication\");\n"
"    }\n"
"\n"
"    /**\n"
"     * Pushes buttons on the calculator\n"
"     *\n"
"     * @param buttons the buttons to push: \"123+2\", etc.\n"
"     * @return The same instance for method chaining.\n"
"     */\n"
"    public CalculatorPageObject enter(String buttons) {\n"
"        for (char numberChar : buttons.toCharArray()) {\n"
"            pushButton(numberChar);\n"
"        }\n"
"        return this;\n"
"    }\n"
"\n"
"    /**\n"
"     * Pushes the specified button.\n"
"     *\n"
"     * @param button The character of the button to push.\n"
"     */\n"
"    private void pushButton(char button) {\n"
"        getDriver().findElement(\n"
"            By.id(\"button_\" + button)).click();\n"
"    }\n"
"\n"
"    /**\n"
"     * Pushes the equals button and returns the contents\n"
"     * of the calculator \"display\".\n"
"     *\n"
"     * @return The string (number) shown in the \"display\"\n"
"     */\n"
"    public String getResult() {\n"
"        equals.click();\n"
"        return display.getText();\n"
"    }\n"
"\n"
"    ...\n"
"}]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2198
#, no-c-format
msgid "If you have <classname>WebElement</classname> members annotated with <classname>@FindBy</classname>, they can be automatically filled with the HTML element matching the given component ID, as if done with <literal>driver.findElement(By.id(fieldname))</literal>. To do so, you need to create the page object with <classname>PageFactory</classname> as is done in the following test setup:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2207
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[\n"
"public class PageObjectExampleITCase {\n"
"    private CalculatorPageObject calculator;\n"
"\n"
"    @Before\n"
"    public void setUp() throws Exception {\n"
"        driver = TestBench.createDriver(new FirefoxDriver());\n"
"\n"
"        // Use PageFactory to automatically initialize fields\n"
"        calculator = PageFactory.initElements(driver,\n"
"                         CalculatorPageObject.class);\n"
"    }\n"
"    ...]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2209
#, no-c-format
msgid "Test cases can use these methods at business logic level, without knowing about the exact structure of the views."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2218
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[@Test\n"
"public void testAddCommentRowToLog() throws Exception {\n"
"    calculator.open();\n"
"\n"
"    // Just do some math first\n"
"    calculator.enter(\"1+2\");\n"
"\n"
"    // Verify the result of the calculation\n"
"    assertEquals(\"3.0\", calculator.getResult());\n"
"\n"
"    ...\n"
"}]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2220
#, no-c-format
msgid "You can find the complete example of the Page Object Pattern in the <filename>example/src/test/java/com/vaadin/testbenchexample/pageobjectexample/</filename> folder in the TestBench installation package. The <filename>PageObjectExampleITCase.java</filename> runs tests on the Calc UI (also included in the example sources), using the page objects to interact with the different parts of the UI and to check the results."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2230
#, no-c-format
msgid "The page objects included in the <filename>pageobjects</filename> subfolder are as follows:"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2236
#, no-c-format
msgid "The <classname>CalculatorPageObject</classname> (as outlined in the example code above) has methods to click the buttons in the calculator and the retrieve the result shown in the \"display\"."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2241
#, no-c-format
msgid "The <classname>LogPageObject</classname> can retrieve the content of the log entries in the log table, and right-click them to open the comment sub-window."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2245
#, no-c-format
msgid "The <classname>AddComment</classname> can enter a comment string in the comment editor sub-window and submit it (click the <guilabel>Add</guilabel> button)."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2254
#, no-c-format
msgid "Taking and Comparing Screenshots"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2256
#, no-c-format
msgid "You can take and compare screenshots with reference screenshots taken earlier. If there are differences, you can fail the test case."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2262
#, no-c-format
msgid "Screenshot Parameters"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2264
#, no-c-format
msgid "The screenshot configuration parameters are defined with static methods in the <classname>com.vaadin.testbench.Parameters</classname> class."
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2271
#, no-c-format
msgid "<parameter>screenshotErrorDirectory</parameter> (default: <literal>null</literal>)"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2272
#, no-c-format
msgid "Defines the directory where screenshots for failed tests or comparisons are stored."
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2278
#, no-c-format
msgid "<parameter>screenshotReferenceDirectory</parameter> (default: <literal>null</literal>)"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2279
#, no-c-format
msgid "Defines the directory where the reference images for screenshot comparison are stored."
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2285
#, no-c-format
msgid "<parameter>screenshotComparisonTolerance</parameter> (default: <literal>0.01</literal>)"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2286
#, no-c-format
msgid "Screen comparison is usually not done with exact pixel values, because rendering in browser often has some tiny inconsistencies. Also image compression may cause small artifacts."
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2293
#, no-c-format
msgid "<parameter>screenshotComparisonCursorDetection</parameter> (default: <literal>false</literal>)"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2294
#, no-c-format
msgid "Some field component get a blinking cursor when they have the focus. The cursor can cause unnecessary failures depending on whether the blink happens to make the cursor visible or invisible when taking a screenshot. This parameter enables cursor detection that tries to minimize these failures."
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2303
#, no-c-format
msgid "<parameter>maxScreenshotRetries</parameter> (default: 2)"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2304
#, no-c-format
msgid "Sometimes a screenshot comparison may fail because the screen rendering has not yet finished, or there is a blinking cursor that is different from the reference screenshot. For these reasons, Vaadin TestBench retries the screenshot comparison for a number of times defined with this parameter."
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2313
#, no-c-format
msgid "<parameter>screenshotRetryDelay</parameter> (default: <literal>500</literal>)"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2314
#, no-c-format
msgid "Delay in milliseconds for making a screenshot retry when a comparison fails."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2325
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[@Before\n"
"public void setUp() throws Exception {\n"
"    Parameters.setScreenshotErrorDirectory(\n"
"        \"screenshots/errors\");\n"
"    Parameters.setScreenshotReferenceDirectory(\n"
"        \"screenshots/reference\");\n"
"    Parameters.setMaxScreenshotRetries(2);\n"
"    Parameters.setScreenshotComparisonTolerance(1.0);\n"
"    Parameters.setScreenshotRetryDelay(10);\n"
"    Parameters.setScreenshotComparisonCursorDetection(true);\n"
"    Parameters.setCaptureScreenshotOnFailure(true);\n"
"}\n"
"]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2330
#, no-c-format
msgid "Taking Screenshots on Failure"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2334
#, no-c-format
msgid "Vaadin TestBench can take screenshots automatically when a test fails. To enable the feature, you need to include the <classname>ScreenshotOnFailureRule</classname> JUnit rule with a member variable annotated with <classname>@Rule</classname> in the test case as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2342
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[@Rule\n"
"public ScreenshotOnFailureRule screenshotOnFailureRule =\n"
"    new ScreenshotOnFailureRule(this, true);]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2344
#, no-c-format
msgid "The screenshots are written to the error directory defined with the <parameter>screenshotErrorDirectory</parameter> parameter. You can configure it in the test case setup as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2350
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[@Before\n"
"public void setUp() throws Exception {\n"
"    Parameters.setScreenshotErrorDirectory(\"screenshots/errors\");\n"
"    ...\n"
"}]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2354
#, no-c-format
msgid "Taking Screenshots for Comparison"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2356
#, no-c-format
msgid "Vaadin TestBench allows taking screenshots of the web browser window with the <methodname>compareScreen()</methodname> command in the <classname>TestBenchCommands</classname> interface. The method has a number of variants."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2363
#, no-c-format
msgid "The <methodname>compareScreen(<classname>File</classname>)</methodname> takes a <classname>File</classname> object pointing to the reference image. In this case, a possible error image is written to the error directory with the same file name. You can get a file object to a reference image with the static <methodname>ImageFileUtil.getReferenceScreenshotFile()</methodname> helper method."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2373
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[assertTrue(\"Screenshots differ\",\n"
"           testBench(driver).compareScreen(\n"
"               ImageFileUtil.getReferenceScreenshotFile(\n"
"                   \"myshot.png\")));]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2375
#, no-c-format
msgid "The <methodname>compareScreen(<classname>String</classname>)</methodname> takes a base name of the screenshot. It is appended with browser identifier and the file extension."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2381
#, no-c-format
msgid "<?pocket-size 75% ?><![CDATA[assertTrue(testBench(driver).compareScreen(\"tooltip\"));]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2383
#, no-c-format
msgid "The <methodname>compareScreen(<classname>BufferedImage</classname>, <classname>String</classname>)</methodname> allows keeping the reference image in memory. An error image is written to a file with a name determined from the base name given as the second parameter."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2390
#, no-c-format
msgid "Screenshots taken with the <methodname>compareScreen()</methodname> method are compared to a reference image stored in the reference image folder. If differences are found (or the reference image is missing), the comparison method returns <literal>false</literal> and stores the screenshot in the error folder. It also generates an HTML file that highlights the differing regions."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2400
#, no-c-format
msgid "Screenshot Comparison Error Images"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2402
#, no-c-format
msgid "Screenshots with errors are written to the error folder, which is defined with the <parameter>screenshotErrorDirectory</parameter> parameter described in <xref linkend=\"testbench.screenshots.parameters\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2409
#, no-c-format
msgid "For example, the error caused by a missing reference image could be written to <filename>screenshot/errors/tooltip_firefox_12.0.png</filename>. The image is shown in <xref linkend=\"figure.testbench.screenshot.comparison.error-images.calc\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2418
#, no-c-format
msgid "A screenshot taken by a test run"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2429
#, no-c-format
msgid "Screenshots cover the visible page area in the browser. The size of the browser is therefore relevant for screenshot comparison. The browser is normally sized with a predefined default size. You can set the size of the browser window in a couple of ways. You can set the size of the browser window with, for example, <literal>driver.manage().window().setSize(new Dimension(1024, 768));</literal> in the <literal>@Before</literal> method. The size includes any browser chrome, so the actual screenshot size will be smaller. To set the actual view area, you can use <literal>TestBenchCommands.resizeViewPortTo(1024, 768)</literal>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2444
#, no-c-format
msgid "Reference Images"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2446
#, no-c-format
msgid "Reference images are expected to be found in the reference image folder, as defined with the <parameter>screenshotReferenceDirectory</parameter> parameter described in <xref linkend=\"testbench.screenshots.parameters\"/>. To create a reference image, just copy a screenshot from the <filename>errors/</filename> directory to the <filename>reference/</filename> directory."
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:2460
#, no-c-format
msgid "<prompt>$</prompt> <command>cp</command> <parameter>screenshot/errors/tooltip_firefox_12.0.png</parameter> <parameter>screenshot/reference/</parameter>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2462
#, no-c-format
msgid "Now, when the proper reference image exists, rerunning the test outputs success:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:2467
#, no-c-format
msgid ""
"<prompt>$</prompt> <command>java</command> ...\n"
"JUnit version 4.5\n"
".\n"
"Time: 18.222\n"
"\n"
"OK (1 test)"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2469
#, no-c-format
msgid "You can also supply multiple versions of the reference images by appending an underscore and an index to the filenames. For example:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:2474
#, no-c-format
msgid ""
"tooltip_firefox_12.0.png\n"
"tooltip_firefox_12.0_1.png\n"
"tooltip_firefox_12.0_2.png"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2476
#, no-c-format
msgid "This can be useful in certain situations when there actually are more than one \"correct\" reference."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2483
#, no-c-format
msgid "Masking Screenshots"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2485
#, no-c-format
msgid "You can make masked screenshot comparison with reference images that have non-opaque regions. Non-opaque pixels in the reference image, that is, ones with less than 1.0 value in the alpha channel, are ignored in the screenshot comparison."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2492
#, no-c-format
msgid "Please see the <filename>ScreenshotITCase.java</filename> example in the installation package for an example of using masked screenshots. The <filename>example/Screenshot_Comparison_Tests.pdf</filename> document describes how to enable the example and how to create the screenshot masks in an image editor."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2503
#, no-c-format
msgid "Visualization of Differences in Screenshots with Highlighting"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2505
#, no-c-format
msgid "Vaadin TestBench supports advanced difference visualization between a captured screenshot and the reference image. A difference report is written to a HTML file that has the same name as the failed screenshot, but with <filename>.html</filename> suffix. The reports are written to the same <filename>errors/</filename> folder as the screenshots from the failed tests."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2514
#, no-c-format
msgid "The differences in the images are highlighted with blue rectangles. Moving the mouse pointer over a square shows the difference area as it appears in the reference image. Clicking the image switches the entire view to the reference image and back. Text \"<guilabel>Image for this run</guilabel>\" is displayed in the top-left corner of the screenshot to distinguish it from the reference image."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2523
#, no-c-format
msgid "shows a difference report with one difference between the visualized screenshot (bottom) and the reference image (top)."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2531
#, no-c-format
msgid "The reference image and a highlighted error image"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2553
#, no-c-format
msgid "Practices for Handling Screenshots"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2555
#, no-c-format
msgid "Access to the screenshot reference image directory should be arranged so that a developer who can view the results can copy the valid images to the reference directory. One possibility is to store the reference images in a version control system and check-out them to the <filename>reference/</filename> directory."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2563
#, no-c-format
msgid "A build system or a continuous integration system can be configured to automatically collect and store the screenshots as build artifacts."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2571
#, no-c-format
msgid "Known Compatibility Problems"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2575
#, no-c-format
msgid "Screenshots when running Internet Explorer 9 in Compatibility Mode"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2577
#, no-c-format
msgid "Internet Explorer prior to version 9 adds a two-pixel border around the content area. Version 9 no longer does this and as a result screenshots taken using Internet Explorer 9 running in compatibility mode (IE7/IE8) will include the two pixel border, contrary to what the older versions of Internet Explorer do."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2592
#, no-c-format
msgid "Running Tests in a Distributed Environment"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2594
#, no-c-format
msgid "A distributed test environment consists of a grid hub and a number of test nodes. The hub listens to calls from test runners and delegates them to the grid nodes. Different nodes can run on different operating system platforms and have different browsers installed."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2601
#, no-c-format
msgid "A basic distributed installation was covered in <xref linkend=\"testbench.installation.distributed\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2607
#, no-c-format
msgid "Running Tests Remotely"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2609
#, no-c-format
msgid "Remote tests are just like locally executed JUnit tests, except instead of using a browser driver, you use a <classname>RemoteWebDriver</classname> that can connect to the hub. The hub delegates the connection to a grid node with the desired capabilities, that is, which browsers are installed in a suitable node. The capabilities are described with a <classname>DesiredCapabilities</classname> object."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2618
#, no-c-format
msgid "For example, in the example tests given in the <filename>example</filename> folder, we create and use a remote driver as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2623
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[@Test\n"
"public void testRemoteWebDriver() throws MalformedURLException {\n"
"    // Require Firefox in the test node\n"
"    DesiredCapabilities capability =\n"
"        DesiredCapabilities.firefox();\n"
"\n"
"    // Create a remote web driver that connects to a hub\n"
"    // running in the local host\n"
"    WebDriver driver = TestBench.createDriver(\n"
"        new RemoteWebDriver(new URL(\n"
"            \"http://localhost:4444/wd/hub\"), capability));\n"
"\n"
"    // Then use it to run a test as you would use any web driver\n"
"    try {\n"
"        driver.navigate().to(\n"
"            \"http://demo.vaadin.com/sampler#TreeActions\");\n"
"        WebElement e = driver.findElement(By.xpath(\n"
"            \"//div[@class='v-tree-node-caption']\"+\n"
"            \"/div[span='Desktops']\"));\n"
"        new Actions(driver).moveToElement(e).contextClick(e)\n"
"            .perform();\n"
"    } finally {\n"
"        driver.quit();\n"
"    }\n"
"}\n"
"]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2625
#, no-c-format
msgid "Please see the API documentation of the <classname>DesiredCapabilities</classname> class for a complete list of supported capabilities."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2631
#, no-c-format
msgid "Running the example requires that the hub service and the nodes are running. Starting them is described in the subsequent sections. Please refer to <link xlink:href=\"http://seleniumhq.org/docs/07_selenium_grid.html\">Selenium documentation</link> for more detailed information."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2641
#, no-c-format
msgid "Starting the Hub"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2643
#, no-c-format
msgid "The TestBench grid hub listens to calls from test runners and delegates them to the grid nodes. The grid hub service is included in the Vaadin TestBench JAR and you can start it with the following command:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:2649
#, no-c-format
msgid ""
"<prompt>$</prompt> <command>java</command> -jar vaadin-testbench-standalone-&version.testbench;.jar \\\n"
"       -role hub"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2651
#, no-c-format
msgid "You can open the control interface of the hub also with a web browser. Using the default port, just open URL <uri>http://localhost:4444/</uri>. Once you have started one or more grid nodes, as instructed in the next section, the \"console\" page displays a list of the grid nodes with their browser capabilities."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2661
#, no-c-format
msgid "Node Service Configuration"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2663
#, no-c-format
msgid "Test nodes can be configured with command-line options, as described later, or in a configuration file in JSON format. If no configuration file is provided, a default configuration is used."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2669
#, no-c-format
msgid "A node configuration file is specified with the <parameter>-nodeConfig</parameter> parameter to the node service, for example as follows:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:2675
#, no-c-format
msgid ""
"<prompt>$</prompt> <command>java</command> -jar vaadin-testbench-standalone-&version.testbench;.jar\n"
"       -role node -nodeConfig <parameter>nodeConfig.json</parameter>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2677
#, no-c-format
msgid "See <xref linkend=\"testbench.grid.node\"/> for further details on starting the node service."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2683
#, no-c-format
msgid "Configuration File Format"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2685
#, no-c-format
msgid "The test node configuration file follows the JSON format, which defines nested associative maps. An associative map is defined as a block enclosed in curly braces (<literal>{}</literal>). A mapping is a key-value pair separated with a colon (<literal>:</literal>). A key is a string literal quoted with double quotes (<literal>\"key\"</literal>). The value can be a string literal, list, or a nested associative map. A list a comma-separated sequence enclosed within square brackets (<literal>[]</literal>)."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2696
#, no-c-format
msgid "The top-level associative map should have two associations: <literal>capabilities</literal> (to a list of associative maps) and <literal>configuration</literal> (to a nested associative map)."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2702
#, no-c-format
msgid ""
"<?pocket-size 75% ?>{\n"
"  \"capabilities\":\n"
"    [\n"
"      {\n"
"        \"browserName\": \"<parameter>firefox</parameter>\",\n"
"        ...\n"
"      },\n"
"      ...\n"
"    ],\n"
"  \"configuration\":\n"
"  {\n"
"    \"port\": 5555,\n"
"    ...\n"
"  }\n"
"}"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2704
#, no-c-format
msgid "A complete example is given later."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2710 chapter-testbench.xml:2821
#, no-c-format
msgid "Browser Capabilities"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2712
#, no-c-format
msgid "The browser capabilities are defined as a list of associative maps as the value of the <literal>capabilities</literal> key. The capabilities can also be given from command-line using the <parameter>-browser</parameter> parameter, as described in <xref linkend=\"testbench.grid.node\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2720
#, no-c-format
msgid "The keys in the map are the following:"
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2726
#, no-c-format
msgid "platform"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2727
#, no-c-format
msgid "The operating system platform of the test node: <literal>WINDOWS</literal>, <literal>XP</literal>, <literal>VISTA</literal>, <literal>LINUX</literal>, or <literal>MAC</literal>."
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2735
#, no-c-format
msgid "browserName"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2736
#, no-c-format
msgid "A browser identifier, any of: <literal>android</literal>, <literal>chrome</literal>, <literal>firefox</literal>, <literal>htmlunit</literal>, <literal>internet explorer</literal>, <literal>iphone</literal>, <literal>opera</literal>, or <literal>phantomjs</literal> (as of TestBench 3.1)."
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2746
#, no-c-format
msgid "maxInstances"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2747
#, no-c-format
msgid "The maximum number of browser instances of this type open at the same time for parallel testing."
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2753
#, no-c-format
msgid "version"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2754
#, no-c-format
msgid "The major version number of the browser."
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2759
#, no-c-format
msgid "seleniumProtocol"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2760
#, no-c-format
msgid "This should be <literal>WebDriver</literal> for WebDriver use."
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2765
#, no-c-format
msgid "firefox_binary"
msgstr ""

#. Tag: listitem
#: chapter-testbench.xml:2766
#, no-c-format
msgid "Full path and file name of the Firefox executable. This is typically needed if you have Firefox ESR installed in a location that is not in the system path."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2776
#, no-c-format
msgid "Server Configuration"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2778
#, no-c-format
msgid "The node service configuration is defined as a nested associative map as the value of the <literal>configuration</literal> key. The configuration parameters can also be given as command-line parameters to the node service, as described in <xref linkend=\"testbench.grid.node\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2785
#, no-c-format
msgid "See the following example for a typical server configuration."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2791
#, no-c-format
msgid "Example Configuration"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2793
#, no-c-format
msgid ""
"<?pocket-size 75% ?>{\n"
"  \"capabilities\":\n"
"    [\n"
"      {\n"
"        \"browserName\": \"<parameter>firefox</parameter>\",\n"
"        \"maxInstances\": <parameter>5</parameter>,\n"
"        \"seleniumProtocol\": \"<parameter>WebDriver</parameter>\",\n"
"        \"version\": \"<parameter>10</parameter>\",\n"
"        \"firefox_binary\": \"<parameter>/path/to/firefox10</parameter>\"\n"
"      },\n"
"      {\n"
"        \"browserName\": \"<parameter>firefox</parameter>\",\n"
"        \"maxInstances\": <parameter>5</parameter>,\n"
"        \"version\": \"<parameter>16</parameter>\",\n"
"        \"firefox_binary\": \"<parameter>/path/to/firefox16</parameter>\"\n"
"      },\n"
"      {\n"
"        \"browserName\": \"<parameter>chrome</parameter>\",\n"
"        \"maxInstances\": <parameter>5</parameter>,\n"
"        \"seleniumProtocol\": \"<parameter>WebDriver</parameter>\"\n"
"      },\n"
"      {\n"
"        \"platform\": \"<parameter>WINDOWS</parameter>\",\n"
"        \"browserName\": \"<parameter>internet explorer</parameter>\",\n"
"        \"maxInstances\": <parameter>1</parameter>,\n"
"        \"seleniumProtocol\": \"<parameter>WebDriver</parameter>\"\n"
"      }\n"
"    ],\n"
"  \"configuration\":\n"
"  {\n"
"    \"proxy\": \"org.openqa.grid.selenium.proxy.DefaultRemoteProxy\",\n"
"    \"maxSession\": 5,\n"
"    \"port\": 5555,\n"
"    \"host\": ip,\n"
"    \"register\": true,\n"
"    \"registerCycle\": 5000,\n"
"    \"hubPort\": 4444\n"
"  }\n"
"}"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2798
#, no-c-format
msgid "Starting a Grid Node"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2800
#, no-c-format
msgid "A TestBench grid node listens to calls from the hub and is capable of opening a browser. The grid node service is included in the Vaadin TestBench JAR and you can start it with the following command:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:2806
#, no-c-format
msgid ""
"<prompt>$</prompt> <command>java</command> -jar \\\n"
"       vaadin-testbench-standalone-&version.testbench;.jar \\\n"
"       -role node \\\n"
"       -hub <parameter>http://localhost:4444/grid/register</parameter>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2808
#, no-c-format
msgid "The node registers itself in the grid hub. You need to give the address of the hub either with the <parameter>-hub</parameter> parameter or in the node configuration file as described in <xref linkend=\"testbench.grid.node-configuration\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2815
#, no-c-format
msgid "You can run one grid node in the same host as the hub, as is done in the example above with the localhost address."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2823
#, no-c-format
msgid "The browsers installed in the node can be defined either with a command-line parameter or with a configuration file in JSON format, as described in <xref linkend=\"testbench.grid.node-configuration\"/>."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2829
#, no-c-format
msgid "On command-line, you can issue a <parameter>-browser</parameter> option to define the browser capabilities. It must be followed by a comma-separated list of property-value definitions, such as the following:"
msgstr ""

#. Tag: screen
#: chapter-testbench.xml:2835
#, no-c-format
msgid ""
"-browser \"browserName=firefox,version=10,firefox_binary=/path/to/firefox10\" \\\n"
"-browser \"browserName=firefox,version=16,firefox_binary=/path/to/firefox16\" \\\n"
"-browser \"browserName=chrome,maxInstances=5\" \\\n"
"-browser \"browserName=internet explorer,maxInstances=1,platform=WINDOWS\""
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2837
#, no-c-format
msgid "The configuration properties are described in <xref linkend=\"testbench.grid.node-configuration\"/>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2844
#, no-c-format
msgid "Browser Driver Parameters"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2846
#, no-c-format
msgid "If you use Chrome or Internet Explorer, their remote driver executables must be in the system path (in the <literal>PATH</literal> environment variable) or be given with a command-line parameter to the node service:"
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2855
#, no-c-format
msgid "<term>Internet Explorer</term>"
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2857
#, no-c-format
msgid "-Dwebdriver.ie.driver=C:\\path\\to\\IEDriverServer.exe"
msgstr ""

#. Tag: term
#: chapter-testbench.xml:2861
#, no-c-format
msgid "<term>Google Chrome</term>"
msgstr ""

#. Tag: parameter
#: chapter-testbench.xml:2863
#, no-c-format
msgid "-Dwebdriver.chrome.driver=/path/to/ChromeDriver"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2871
#, no-c-format
msgid "Mobile Testing"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2873
#, no-c-format
msgid "Vaadin TestBench includes an iPhone and an Android driver, with which you can test on mobile devices. The tests can be run either in a device or in an emulator/simulator."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2879
#, no-c-format
msgid "The actual testing is just like with any WebDriver, using either the <classname>IPhoneDriver</classname> or the <classname>AndroidDriver</classname>. The Android driver assumes that the hub (<filename>android-server</filename>) is installed in the emulator and forwarded to port 8080 in localhost, while the iPhone driver assumes port 3001. You can also use the <classname>RemoteWebDriver</classname> with either the <methodname>iphone()</methodname> or the <methodname>android()</methodname> capability, and specify the hub URI explicitly."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2891
#, no-c-format
msgid "The mobile testing setup is covered in detail in the Selenium documentation for both the <link xlink:href=\"http://code.google.com/p/selenium/wiki/IPhoneDriver\">IPhoneDriver</link> and the <link xlink:href=\"http://code.google.com/p/selenium/wiki/AndroidDriver\">AndroidDriver</link>."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2902
#, no-c-format
msgid "Headless Testing"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2904
#, no-c-format
msgid "TestBench (3.1 and later) supports fully-featured headless testing with PhantomJS (<link xlink:href=\"http://phantomjs.org\">http://phantomjs.org</link>), a headless browser based on WebKit. It has fast native support for various web standards: JavaScript, DOM handling, CSS selector, JSON, Canvas, and SVG."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2912
#, no-c-format
msgid "Headless testing using PhantomJS allows for around 15% faster test execution without having to start a graphical web browser, even when performing screenshot-based testing! This also makes it possible to run full-scale functional tests on the front-end directly on a build server, without the need to install any web browsers."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2920
#, no-c-format
msgid "It is usually best to use a graphical browser to develop the test cases, as it is possible to see interactively what happens while the tests are being executed. Once the tests are working correctly in a graphical browser, you can migrate them to run on the PhantomJS headless browser."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2928
#, no-c-format
msgid "Basic Setup for Running Headless Tests"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2930
#, no-c-format
msgid "The only set up required is to install the PhantomJS binary. Follow the instructions for your operating system at <link xlink:href=\"http://phantomjs.org/download.html\">PhantomJS download page</link>, and place the binary in the system path."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2937
#, no-c-format
msgid "The PhantomJSDriver dependency is already included in Vaadin TestBench."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2942
#, no-c-format
msgid "Creating a Headless WebDriver Instance"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2944
#, no-c-format
msgid "Creating an instance of the <classname>PhantomJSDriver</classname> is just as easy as creating an instance of <classname>FirefoxDriver</classname>."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2949
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[setDriver(TestBench.createDriver(\n"
"    new PhantomJSDriver(DesiredCapabilities.phantomjs())));]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2951
#, no-c-format
msgid "Some tests may fail because of the small default window size in PhantomJS. Such tests are, for example, tests containing elements that pop up and might go off-screen when the window is small. To make them work better, specify a size for the window:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2958
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[getDriver().manage().window().setSize(\n"
"        new Dimension(1024, 768));]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2960
#, no-c-format
msgid "Nothing else is needed to run tests headlessly."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2967
#, no-c-format
msgid "Running Headless Tests in a Distributed Environment"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2969
#, no-c-format
msgid "Running PhantomJS in a distributed grid is equally easy. First, install PhantomJS in the nodes by following the instructions in <xref linkend=\"testbench.headless.running\"/>. Then, start PhantomJS using the following command:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2976
#, no-c-format
msgid ""
"<?pocket-size 65% ?><![CDATA[phantomjs --webdriver=8080 \\\n"
"          --webdriver-selenium-grid-hub=http://127.0.0.1:4444]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2978
#, no-c-format
msgid "The above will start PhantomJS in the WebDriver mode and register it with a grid hub running at <literal>127.0.0.1:4444</literal>. After this, running tests in the grid is as easy as passing <methodname>DesiredCapabilities.phantomjs()</methodname> to the <literal>RemoteWebDriver</literal> constructor."
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:2986
#, no-c-format
msgid ""
"<?pocket-size 75% ?><![CDATA[setDriver(new RemoteWebDriver(\n"
"        DesiredCapabilities.phantomjs()));]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2991
#, no-c-format
msgid "Known Issues"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:2993
#, no-c-format
msgid "This section provides information and instructions on a few features that are known to be difficult to use or need modification to work."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:2999
#, no-c-format
msgid "Testing the LoginForm"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3001
#, no-c-format
msgid "Please note that, as of Vaadin 7, <classname>LoginForm</classname> has been deprecated and should no longer be used. This section is here to inform those still using Vaadin 6.x and testing with Vaadin TestBench."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3007
#, no-c-format
msgid "Replaying interactions in the <classname>LoginForm</classname> component is somewhat tricky because the identifier of the <literal>iframe</literal> element changes every time the application is restarted, so it can not be used for selecting it. The use of an iframe element means that recordings have to select the target frame before fields can be correctly identified."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:3016
#, no-c-format
msgid "Selecting a Frame in the Recorder"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3018
#, no-c-format
msgid "Selecting the correct frame in the recorder can be done by modifying the <parameter>target</parameter> of the recorded <command>selectFrame</command> command. One way to select the correct frame is to specify its 0-based index in the selector, such as \"<literal>index=2</literal>\"."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3026
#, no-c-format
msgid "Another way is to specify an XPath selector for the <literal>iframe</literal>. In this case it helps if you can specify a component ID for the <classname>LoginForm</classname> component. In the following XPath selector example, the component ID of the <classname>LoginForm</classname> is \"login\":"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:3034
#, no-c-format
msgid "<![CDATA[xpath=//id(\"login\")//iframe]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:3038
#, no-c-format
msgid "Selecting a Frame in JUnit Code"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3040
#, no-c-format
msgid "Selecting the correct frame in JUnit code by index number can be done as follows:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:3045
#, no-c-format
msgid ""
"<![CDATA[// Select frame by its 0-based index\n"
"getDriver().switchTo().frame(2);]]>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3047
#, no-c-format
msgid "Or by the XPath with:"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:3051
#, no-c-format
msgid ""
"<![CDATA[WebElement frame = getDriver().\n"
"    findElement(By.xpath(\"//id('login')//iframe\"));\n"
"getDriver().switchTo().frame(frame);]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:3056
#, no-c-format
msgid "Using <methodname>assertTextPresent</methodname> and <methodname>assertTextNotPresent</methodname>"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3058
#, no-c-format
msgid "The <methodname>assertTextPresent</methodname> and <methodname>assertTextNotPresent</methodname> methods in TestBench Recorder are problematic in that they do not respect CSS rules that hide elements, such as <literal>display: none</literal>. Because of this, you may have trouble confirming that text is or is not present."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3066
#, no-c-format
msgid "This issue will be fixed in a future release, but until then, you can use a better, although more complex, strategy for testing whether a string is present on the screen or not. You can specify a condition for the style attribute that makes the text hidden with the <methodname>assertElementPresent</methodname> method and an XPath selector. For example (as it would be specified in Recorder):"
msgstr ""

#. Tag: programlisting
#: chapter-testbench.xml:3075
#, no-c-format
msgid ""
"<![CDATA[xpath=//div[contains(@style, \"display: none\")]\n"
"//div[contains(text(),\"HIDDEN TEXT\")]]]>"
msgstr ""

#. Tag: title
#: chapter-testbench.xml:3079
#, no-c-format
msgid "Exporting Recordings of the <classname>Upload</classname> Component"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3081
#, no-c-format
msgid "Exporting recordings of the <classname>Upload</classname> component exports one piece of unnecessary code that makes replay fail. Whenever you record a file upload, remember to remove the call to <methodname>clear()</methodname> as upload fields are special fields that cannot be cleared. Also make sure that the replay window is wide enough for the upload button to be visible (see <methodname>driver.resizeViewPortTo()</methodname>), otherwise you will get an exception when running the test."
msgstr ""

#. Tag: title
#: chapter-testbench.xml:3092
#, no-c-format
msgid "Running Firefox Tests on Mac OS X"
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3094
#, no-c-format
msgid "Firefox needs to have focus in the main window for any focus events to be triggered. This sometimes causes problems if something interferes with the focus. For example, a <classname>TextField</classname> that has an input prompt relies on the JavaScript <methodname>onFocus()</methodname> event to clear the prompt when the field is focused."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3102
#, no-c-format
msgid "The problem occurs when OS X considers the Java process of an application using TestBench (or the node service) to have a native user interface capability, as with AWT or Swing, even when they are not used. This causes the focus to switch from Firefox to the process using TestBench, causing tests requiring focus to fail. To remedy this problem, you need to start the JVM in which the tests are running with the <parameter>-Djava.awt.headless=true</parameter> parameter to disable the user interface capability of the Java process."
msgstr ""

#. Tag: para
#: chapter-testbench.xml:3113
#, no-c-format
msgid "Note that the same problem is present also when debugging tests with Firefox. We therefore recommend using Chrome for debugging tests, unless Firefox is necessary."
msgstr ""
